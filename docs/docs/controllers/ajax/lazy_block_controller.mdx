---
id: LazyBlockController
title: LazyBlockController
---


import NoActions from "../../_partials/no-actions.md";
import NoClasses from "../../_partials/no-classes.md";
import NoSideEffects from "../../_partials/no-side-effects.md";
import { Sandpack } from "@codesandbox/sandpack-react";

## Purpose

AJAX load content, only when it comes into view, while showing a placeholder.

## [Actions](https://stimulus.hotwire.dev/reference/actions)
<NoActions/>

## [Targets](https://stimulus.hotwire.dev/reference/targets)

| Target               | Purpose                                               | Default                     |
|----------------------|-------------------------------------------------------|-----------------------------|
| `replace` (Optional) | The element to replace when the fetch request succeed | the controller root element |

## [Classes](https://stimulus.hotwire.dev/reference/classes)
<NoClasses/>

## [Values](https://stimulus.hotwire.dev/reference/values)

| Value                     | Type   | Description                                                                                                     | Default                                        |
|---------------------------|--------|-----------------------------------------------------------------------------------------------------------------|------------------------------------------------|
| `endpoint`                | String | The URL to fetch content from                                                                                   | -                                              |
| `errorMessage` (Optional) | String | The error message to display when the remote content fails to load                                              | `This content failed to load`                  |
| `selector` (Optional)     | String | The CSS selector to use to extract the desired element(s) from the returned HTML response                       | Empty. The entire HTML response will be loaded |
| `maxRetries` (Optional)   | Number | How many times the controller should retry fetching the content in the event of network errors or bad responses | 1                                              |

## Events

| Event                 | When                                                        | Dispatched on               | `event.detail` |
|-----------------------|-------------------------------------------------------------|-----------------------------|----------------|
| `lazy-block:success`  | When the content is fetch successfully                      | the controller root element | -              |
| `lazy-block:error`    | When the block fails to get a response from the endpoint    | the controller root element | -              |
| `lazy-block:complete` | When the request finishes, regardless of success or failure | the controller root element | -              |

## Side Effects
<NoSideEffects/>


## How to Use

<Sandpack
  template={"vanilla"}
  options={{
    externalResources: [
      "https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css",
      "https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js",
      "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    ]
  }}
  customSetup={{
    dependencies: {
      "@hotwired/stimulus": "latest",
      "stimulus-library": "latest"
    }
  }}
  files={{
    "/index.html": `<div class="container mt-5">
  <div class="row">
    <div class="col-md-8 mx-auto">
      <div class="scroll-container" style="height: 400px; overflow-y: auto; border: 1px solid #ddd; padding: 20px;">
        <div class="mb-4">
          <h4>Scroll down to see lazy loading in action</h4>
          <p>This content is loaded immediately when the page loads.</p>
        </div>

        <div class="mb-4">
          <div
            data-controller="lazy-block"
            data-lazy-block-endpoint-value="/api/content"
            data-lazy-block-error-message-value="Failed to load content. Please try again."
          >
            <div class="card">
              <div class="card-body">
                <i class="fas fa-spinner fa-spin me-2"></i>
                Loading content...
              </div>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <div
            data-controller="lazy-block"
            data-lazy-block-endpoint-value="/api/content"
            data-lazy-block-selector-value=".card"
            data-lazy-block-target="replace"
          >
            <div class="card">
              <div class="card-body">
                <i class="fas fa-spinner fa-spin me-2"></i>
                Loading with selector...
              </div>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <div
            data-controller="lazy-block"
            data-lazy-block-endpoint-value="/api/content"
            data-lazy-block-max-retries-value="2"
          >
            <div class="card">
              <div class="card-body">
                <i class="fas fa-spinner fa-spin me-2"></i>
                Loading with retry settings...
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>`,
    "/index.js": `
    import { Application } from '@hotwired/stimulus';
    import { LazyBlockController } from 'stimulus-library';
    
    const app = Application.start();
    app.debug = true;
    app.register('lazy-block', LazyBlockController);
`,
  }}
/>

## See Also

[Async Block Controller](./AsyncBlockController)
[Load Block Controller](./LoadBlockController)
[Poll Block Controller](./PollBlockController)
