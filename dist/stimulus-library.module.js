import{Controller as t}from"stimulus";import e from"lodash-es/get";import n from"lodash-es/set";import i from"dialog-polyfill";import r from"camelcase";function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}var d=function(t){function e(e){var n;return n=t.call(this,e)||this,new Proxy(c(n),{get:function(t,e){var i=Reflect.get(t,e),r=c(n);if(function(t){switch(t){case"application":case"el":case"element":case"constructor":case"initialize":case"log":case"logEvent":case"dispatch":case"data":case"valueDescriptorMap":case"identifier":return!1}return!(/^_.*?$/.test(t)||/^.*?Target(s)?$/.test(t)||/^.*?Value$/.test(t)||/^.*?ValueChanged$/.test(t)||/^.*?Class$/.test(t))}(e.toString())){if("function"==typeof i)return new Proxy(i,{apply:function(t,n,i){return r.log(e.toString(),{args:i}),Reflect.apply(t,n,i)}});n.log(e.toString())}return i}})||c(n)}l(e,t);var n=e.prototype;return n.dispatch=function(t,e,n){void 0===n&&(n={});var i=Object.assign({},{bubbles:!0,cancelable:!0,detail:{target:t}},n);i.detail.target&&(i.detail.target=t);var r=new CustomEvent(e,i);this.logEvent(e,r,t),t.dispatchEvent(r)},n.log=function(t,e){if(void 0===e&&(e={}),this.application.debug){var n=console;n.groupCollapsed("%c"+this.identifier+" %c#"+t,"color: #3B82F6","color: unset"),n.log(o({element:this.element},e)),n.groupEnd()}},n.logEvent=function(t,e,n){if(this.application.debug){var i=console;i.groupCollapsed("%c"+this.identifier+" %c"+t+"%c","color: #3B82F6","color: #0be000","color: unset"),i.log({element:n}),i.groupEnd()}},a(e,[{key:"el",get:function(){return this.element}}]),e}(t),f=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this._checkAnchor=this._checkAnchor.bind(this)},n.connect=function(){var t=this;requestAnimationFrame(function(){t._checkAnchor(),window.addEventListener("hashchange",t._checkAnchor)})},n.disconnect=function(){window.removeEventListener("hashchange",this._checkAnchor)},n.write=function(t){null==t||t.preventDefault(),this.anchor=this.key},n._checkAnchor=function(){this.dispatch(this.el,this.key===this.anchor?"anchor-spy:active":"anchor-spy:inactive")},a(e,[{key:"key",get:function(){return this.keyValue.replaceAll("#","")}},{key:"anchor",get:function(){return window.location.hash.substr(1)},set:function(t){window.location.hash=t}}]),e}(d);f.values={key:String};var p=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this._handleVisibility=this._handleVisibility.bind(this)},n.connect=function(){window.addEventListener("focus",this._handleVisibility),window.addEventListener("blur",this._handleVisibility),document.addEventListener("visibilitychange",this._handleVisibility),this._handleVisibility()},n.disconnect=function(){window.removeEventListener("focus",this._handleVisibility),window.removeEventListener("blur",this._handleVisibility),document.removeEventListener("visibilitychange",this._handleVisibility)},n.appear=function(){this.dispatch(this.el,"appearance:appear")},n.away=function(){this.dispatch(this.el,"appearance:away")},n._handleVisibility=function(){this._documentIsActive()?this.appear():this.away()},n._documentIsActive=function(){return"visible"==document.visibilityState&&document.hasFocus()},e}(d),m=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){this.loadContent()},n.loadContent=function(){var t=this,e=this,n=this.hasReplaceTarget?this.replaceTarget:this.el;fetch(this.endpointValue).then(function(t){return t.text()}).then(function(i){var r=document.createElement("div");if(r.innerHTML=i,t.hasSelectorValue){var s=r.querySelectorAll(t.selectorValue);n.replaceWith.apply(n,s)}else n.replaceWith.apply(n,r.children);e.dispatch(n,"ajax:success")}).catch(function(i){n.replaceWith(t._errorMessage),e.dispatch(n,"ajax:error")}).finally(function(){e.dispatch(n,"ajax:complete")})},a(e,[{key:"_errorMessage",get:function(){return this.hasErrorMessageValue?this.errorMessageValue:"This content failed to load"}}]),e}(d);m.targets=["replace"],m.values={endpoint:String,errorMessage:String,selector:String};var v=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.handler=this.handler.bind(this)},n.connect=function(){var t=this;this.el.querySelectorAll("input, select, textarea").forEach(function(e){return e.addEventListener("change",t.handler)})},n.disconnect=function(){var t=this;this.el.querySelectorAll("input, select, textarea").forEach(function(e){return e.removeEventListener("change",t.handler)})},n.handler=function(t){this.dispatch(this.el,"submit")},e}(d);const g=(t,e)=>{const n=t[e];return"function"==typeof n?n:(...t)=>{}},y=(t,e,n)=>{let i=t;return!0===n?i=`${e.identifier}:${t}`:"string"==typeof n&&(i=`${n}:${t}`),i},b=(t,e,n)=>{const{bubbles:i,cancelable:r,composed:s}=e||{bubbles:!0,cancelable:!0,composed:!0};return e&&Object.assign(n,{originalEvent:e}),new CustomEvent(t,{bubbles:i,cancelable:r,composed:s,detail:n})},_={dispatchEvent:!0,eventPrefix:!0},E=(t,e={})=>{const{dispatchEvent:n,eventPrefix:i}=Object.assign({},_,e),r=(null==e?void 0:e.element)||t.element,s=t.disconnect.bind(t),a=new IntersectionObserver(e=>{const[s]=e;s.isIntersecting?(e=>{if(t.isVisible=!0,g(t,"appear").call(t,e),n){const n=y("appear",t,i),s=b(n,null,{controller:t,entry:e});r.dispatchEvent(s)}})(s):t.isVisible&&(e=>{if(t.isVisible=!1,g(t,"disappear").call(t,e),n){const n=y("disappear",t,i),s=b(n,null,{controller:t,entry:e});r.dispatchEvent(s)}})(s)},e),o=()=>{a.observe(r)},l=()=>{a.unobserve(r)};return Object.assign(t,{isVisible:!1,disconnect(){l(),s()}}),o(),[o,l]},w={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},k={debug:!1,logger:console};class V{constructor(t,e={}){var n,i,r;this.log=(t,e)=>{this.debug&&(this.logger.groupCollapsed(`%c${this.controller.identifier} %c#${t}`,"color: #3B82F6","color: unset"),this.logger.log(Object.assign({controllerId:this.controllerId},e)),this.logger.groupEnd())},this.debug=null!==(i=null!==(n=null==e?void 0:e.debug)&&void 0!==n?n:t.application.stimulusUseDebug)&&void 0!==i?i:k.debug,this.logger=null!==(r=null==e?void 0:e.logger)&&void 0!==r?r:k.logger,this.controller=t,this.controllerId=t.element.id||t.element.dataset.id,this.controllerInitialize=t.initialize.bind(t),this.controllerConnect=t.connect.bind(t),this.controllerDisconnect=t.disconnect.bind(t)}}class T extends V{constructor(t,e={}){super(t,e),this.observe=()=>{this.targetElement.addEventListener("mouseenter",this.onEnter),this.targetElement.addEventListener("mouseleave",this.onLeave)},this.unobserve=()=>{this.targetElement.removeEventListener("mouseenter",this.onEnter),this.targetElement.removeEventListener("mouseleave",this.onLeave)},this.onEnter=()=>{g(this.controller,"mouseEnter").call(this.controller),this.log("mouseEnter",{hover:!0})},this.onLeave=()=>{g(this.controller,"mouseLeave").call(this.controller),this.log("mouseLeave",{hover:!1})},this.targetElement=(null==e?void 0:e.element)||t.element,this.controller=t,this.enhanceController(),this.observe()}enhanceController(){const t=this.controller.disconnect.bind(this.controller);Object.assign(this.controller,{disconnect:()=>{this.unobserve(),t()}})}}class S extends V{constructor(t,e={}){super(t,e),this.observe=()=>{try{this.observer.observe(this.targetElement,this.options)}catch(t){this.controller.application.handleError(t,"At a minimum, one of childList, attributes, and/or characterData must be true",{})}},this.unobserve=()=>{this.observer.disconnect()},this.mutation=t=>{g(this.controller,"mutate").call(this.controller,t),this.log("mutate",{entries:t})},this.targetElement=(null==e?void 0:e.element)||t.element,this.controller=t,this.options=e,this.observer=new MutationObserver(this.mutation),this.enhanceController(),this.observe()}enhanceController(){const t=this.controller.disconnect.bind(this.controller);Object.assign(this.controller,{disconnect:()=>{this.unobserve(),t()}})}}const L=(t,e={})=>{const n=new S(t,e);return[n.observe,n.unobserve]},C=t=>{const e=e=>{const{innerWidth:n,innerHeight:i}=window,r={height:i||Infinity,width:n||Infinity,event:e};g(t,"windowResize").call(t,r)},n=t.disconnect.bind(t),i=()=>{window.addEventListener("resize",e),e()},r=()=>{window.removeEventListener("resize",e)};return Object.assign(t,{disconnect(){r(),n()}}),i(),[i,r]},A=(t,e=200)=>{let n=null;return function(){const i=arguments,r=this,s=()=>t.apply(r,i);n&&clearTimeout(n),n=setTimeout(s,e)}};var D=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this._handler=this._handler.bind(this)},n.connect=function(){var t=this.el;t.style.resize="none",t.style.boxSizing="border-box",t.addEventListener("input",this._handler),t.addEventListener("focus",this._handler),C(this),requestAnimationFrame(this._handler)},n.windowResize=function(){this._handler()},n._handler=function(){this.autosize(this.el)},n.autosize=function(t){var e=t.offsetHeight-t.clientHeight;t.style.height="auto",t.style.height=t.scrollHeight+e+"px"},e}(d),I=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this._updateCharCount=this._updateCharCount.bind(this)},n.connect=function(){this._updateCharCount(),this.inputTarget.addEventListener("input",this._updateCharCount)},n.disconnect=function(){this.inputTarget.removeEventListener("input",this._updateCharCount)},n._updateCharCount=function(){var t=this.inputTarget.value.length;this.outputTarget.innerText=t.toString(),this.hasErrorClass&&(this._isValidCount(t)?this.outputTarget.classList.remove(this.errorClass):this.outputTarget.classList.add(this.errorClass))},n._isValidCount=function(t){var e=0,n=99999;return this.hasMinValue&&(e=this.minValue),this.hasMaxValue&&(n=this.maxValue),t>=e&&t<=n},e}(d);I.targets=["input","output"],I.values={min:Number,max:Number},I.classes=["error"];var x=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.toggle=this.toggle.bind(this),this.refresh=this.refresh.bind(this)},n.connect=function(){var t=this;requestAnimationFrame(function(){t.hasSelectAllTarget&&(t.selectAllTarget.addEventListener("change",t.toggle),t.checkboxTargets.forEach(function(e){return e.addEventListener("change",t.refresh)}),t.refresh())})},n.disconnect=function(){var t=this;this.hasSelectAllTarget&&(this.selectAllTarget.removeEventListener("change",this.toggle),this.checkboxTargets.forEach(function(e){return e.removeEventListener("change",t.refresh)}))},n.toggle=function(t){t.preventDefault();var e=t.target;this.checkboxTargets.forEach(function(t){return t.checked=e.checked})},n.refresh=function(){var t=this.checkboxTargets.length,e=this.checked.length;this.selectAllTarget.checked=e>0,this.selectAllTarget.indeterminate=e>0&&e<t},a(e,[{key:"checked",get:function(){return this.checkboxTargets.filter(function(t){return t.checked})}},{key:"unchecked",get:function(){return this.checkboxTargets.filter(function(t){return!t.checked})}}]),e}(d);x.targets=["selectAll","checkbox"];var M=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).supported=!1,e}l(e,t);var n=e.prototype;return n.connect=function(){this.supported=document.queryCommandSupported("copy"),this.hasRemoveUnusedValue&&this.removeUnusedValue&&(this.supported&&this.hasFallbackTarget?this.fallbackTarget.remove():this.hasCopyTarget&&this.copyTarget.remove())},n.select=function(t){t&&t.preventDefault(),this.sourceTarget.select()},n.copy=function(t){t&&t.preventDefault(),this.sourceTarget.select(),this.supported&&document.execCommand("copy")},e}(d);function O(t){return"A"==t.nodeName}function N(t){return"FORM"==t.nodeName}function H(t){return"INPUT"==t.nodeName}function z(t){return"BUTTON"==t.nodeName}function R(t){return"SELECT"==t.nodeName}function B(t){return H(t)&&("radio"===t.type||"checkbox"===t.type)}M.targets=["source","button","copy","fallback"],M.values={removeUnused:Boolean};var P=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.confirm=this.confirm.bind(this)},n.connect=function(){var t=this;requestAnimationFrame(function(){var e=t.el;if(N(e))e.addEventListener("submit",t.confirm);else{if(!O(e))throw new Error("Can't handle confirmation on attached element");e.addEventListener("click",t.confirm)}})},n.confirm=function(t){window.confirm(this.message)||(t.preventDefault(),this.dispatch(this.el,"confirm:cancelled"))},a(e,[{key:"message",get:function(){return this.hasMessageValue?this.messageValue:"Are you sure?"}}]),e}(d);P.values={message:String};var j=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.handlePopstate=this.handlePopstate.bind(this),this.handleTurboNavigation=this.handleTurboNavigation.bind(this)},n.connect=function(){var t=this;window.onbeforeunload=function(){return t._message},window.addEventListener("popstate",this.handlePopstate),window.addEventListener("submit",function(){window.removeEventListener("popstate",t.handlePopstate),window.onbeforeunload=null}),window.addEventListener("turbolinks:before-visit",this.handleTurboNavigation),window.addEventListener("turbo:before-visit",this.handleTurboNavigation)},n.handlePopstate=function(t){return!1},n.handleTurboNavigation=function(t){confirm(this._message)||t.preventDefault()},a(e,[{key:"_message",get:function(){return this.hasMessageValue?this._messageValue:"Do you want to leave this page? Changes you made may not be saved"}}]),e}(d);j.values={_message:String};var F=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.connect=function(){console.log("Debug Controller",this,this.testTargets)},e}(d);F.targets=["test"];var q=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this._checkDirty=this._checkDirty.bind(this)},n.connect=function(){var t=this.el;this._cacheLoadValues(),this._checkDirty(),t.addEventListener("input",this._checkDirty),t.addEventListener("change",this._checkDirty)},n.disconnect=function(){var t=this.el;t.removeEventListener("input",this._checkDirty),t.removeEventListener("change",this._checkDirty)},n.restore=function(t){null==t||t.preventDefault(),this._restoreElementFromLoadValue()},n._getElementValue=function(){var t=this.el;return B(t)?t.checked:t.value},n._getElementLoadValue=function(){var t=this.el,e=t.getAttribute(this._cacheAttrName);return B(t)?null==e?t.defaultChecked:"true"==e:(null!==e||R(t)&&Array.from(t.options).forEach(function(e){if(e.defaultSelected)return t.value=e.value,e.value}),e)},n._elementHasCachedLoadValue=function(){return this.el.hasAttribute(this._cacheAttrName)},n._checkDirty=function(){var t=this.el;this._isElementDirty()?t.setAttribute("data-dirty","true"):t.removeAttribute("data-dirty")},n._isElementDirty=function(){return this._getElementValue()!==this._getElementLoadValue()},n._restoreElementFromLoadValue=function(){var t=this.el,e=t.getAttribute(this._cacheAttrName);B(t)?(t.setAttribute(this._cacheAttrName,t.checked.toString()),t.checked=null==e?t.defaultChecked:"true"==e):R(t)?null==e?Array.from(t.options).forEach(function(e){e.defaultSelected&&(t.value=e.value)}):t.value=e:t.value=null==e?t.defaultValue:e},n._cacheLoadValues=function(){var t=this.el;!this._elementHasCachedLoadValue()&&B(t)?t.setAttribute(this._cacheAttrName,t.checked.toString()):t.setAttribute(this._cacheAttrName,t.value.toString())},a(e,[{key:"_cacheAttrName",get:function(){return"detect-dirty-load-value"}}]),e}(d),W=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this._checkDirty=this._checkDirty.bind(this)},n.connect=function(){var t=this.el;this._cacheLoadValues(),this._checkDirty(),t.addEventListener("input",this._checkDirty),t.addEventListener("change",this._checkDirty)},n.disconnect=function(){var t=this.el;t.removeEventListener("input",this._checkDirty),t.removeEventListener("change",this._checkDirty)},n.restore=function(t){var e=this;null==t||t.preventDefault(),this._formElements.forEach(function(t){return e._restoreElementFromLoadValue(t)})},n._getElementValue=function(t){return B(t)?t.checked:t.value},n._getElementLoadValue=function(t){var e=t.getAttribute(this._cacheAttrName);return B(t)?null==e?t.defaultChecked:"true"==e:(null!==e||R(t)&&Array.from(t.options).forEach(function(e){if(e.defaultSelected)return t.value=e.value,e.value}),e)},n._elementHasCachedLoadValue=function(t){return t.hasAttribute(this._cacheAttrName)},n._checkElementDirty=function(t){this._isElementDirty(t)?t.setAttribute("data-dirty","true"):t.removeAttribute("data-dirty")},n._isElementDirty=function(t){return this._getElementValue(t)!==this._getElementLoadValue(t)},n._cacheElementLoadValue=function(t){!this._elementHasCachedLoadValue(t)&&B(t)?t.setAttribute(this._cacheAttrName,t.checked.toString()):t.setAttribute(this._cacheAttrName,t.value.toString())},n._restoreElementFromLoadValue=function(t){var e=t.getAttribute(this._cacheAttrName);B(t)?(t.setAttribute(this._cacheAttrName,t.checked.toString()),t.checked=null==e?t.defaultChecked:"true"==e):R(t)?null==e?Array.from(t.options).forEach(function(e){e.defaultSelected&&(t.value=e.value)}):t.value=e:t.value=null==e?t.defaultValue:e},n._cacheLoadValues=function(){var t=this;this._formElements.forEach(function(e){return t._cacheElementLoadValue(e)})},n._checkDirty=function(){var t=this;this._formElements.forEach(function(e){return t._checkElementDirty(e)}),this._formElements.some(function(t){return t.hasAttribute("data-dirty")})?this.el.setAttribute("data-dirty","true"):this.el.removeAttribute("data-dirty")},a(e,[{key:"_formElements",get:function(){return Array.from(this.el.querySelectorAll("input, select, textarea"))}},{key:"_cacheAttrName",get:function(){return"detect-dirty-load-value"}}]),e}(d),$=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){this.toggle()},n.toggle=function(){this.hasDisablerTarget&&this.disablerTarget.checked?this.disableInputs():this.enableInputs()},n.disableInputs=function(){var t=this.hasClearValue&&this.clearValue;this.disableTargets.forEach(function(e,n){t&&(e.value=""),e.disabled=!0})},n.enableInputs=function(){this.disableTargets.forEach(function(t,e){t.disabled=!1})},e}(d);$.targets=["disabler","disable"],$.values={clear:Boolean};var U=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.enable=this.enable.bind(this),this.disable=this.disable.bind(this)},n.connect=function(){var t=this;requestAnimationFrame(function(){t.el.addEventListener("click",t.disable)})},n.disconnect=function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)},n.disable=function(t){var e=this.el;this._isDisabled(e)?(null==t||t.preventDefault(),null==t||t.stopImmediatePropagation()):(this._cacheText=this._getElText(e),this._setElText(e,this._message),this._disable(e),setTimeout(this.enable,this._timeout))},n.enable=function(t){null==t||t.preventDefault();var e=this.el;this._isDisabled(e)&&(this._setElText(e,this._cacheText),this._enable(e))},n._isDisabled=function(t){return H(t)&&"submit"==t.type||z(t)?t.disabled:"true"==t.dataset.disabled},n._getElText=function(t){return H(t)&&"submit"==t.type?t.value:t.innerText},n._setElText=function(t,e){H(t)&&"submit"==t.type?t.value=e:(z(t)||O(t))&&(t.innerText=e)},n._disable=function(t){H(t)&&"submit"==t.type||z(t)?t.disabled=!0:t.dataset.disabled="true"},n._enable=function(t){H(t)&&"submit"==t.type||z(t)?t.disabled=!1:t.dataset.disabled=void 0},a(e,[{key:"_message",get:function(){return this.hasMessageValue?this.messageValue:"Submitting..."}},{key:"_timeout",get:function(){return this.hasTimeoutValue?this.timeoutValue:1e3}}]),e}(d);U.values={message:String,timeout:Number};var J=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.dismiss=function(){this.el.remove()},e}(d),Y=function(t){function i(){return t.apply(this,arguments)||this}l(i,t);var r=i.prototype;return r.connect=function(){var t=this;requestAnimationFrame(function(){t._restoreOnLoad&&t.restore()})},r.clear=function(t){t&&t.preventDefault(),localStorage.removeItem(this._uniqueIdentifier),this.dispatch(this._element,"element-save:cleared")},r.save=function(t){t&&t.preventDefault();var n=this._element,i=this.attributesValue.split(" "),r={};i.forEach(function(t){return r[t]=e(n,t)}),localStorage.setItem(this._uniqueIdentifier,JSON.stringify(r)),this.dispatch(n,"element-save:save:success")},r.restore=function(t){t&&t.preventDefault();var e=this._element;if(localStorage.getItem(this._uniqueIdentifier)){var i=JSON.parse(localStorage.getItem(this._uniqueIdentifier));Object.keys(i).forEach(function(t){n(e,t,i[t])}),this.dispatch(e,"element-save:restore:success")}else this.dispatch(e,"element-save:restore:empty")},a(i,[{key:"_id",get:function(){if(this.hasIdValue)return this.idValue;var t=this.el.id;if(""!==t)return t;throw new Error("No ID value to uniquely identify this element. Please either specify data-"+this.identifier+"-id-value or give this element an 'id' attribute. ")}},{key:"_uniqueIdentifier",get:function(){return location.href+" "+this._id}},{key:"_restoreOnLoad",get:function(){return!this.hasRestoreOnLoadValue||this.restoreOnLoadValue}},{key:"_element",get:function(){return this.hasElementTarget?this.elementTarget:this.el}}]),i}(d);Y.targets=["element"],Y.values={id:String,attributes:String,restoreOnLoad:Boolean};var G=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){L(this,{element:this.el,childList:!0}),this.checkEmpty()},n.mutate=function(t){this.checkEmpty()},n.checkEmpty=function(){var t=this.el,e=this.children;0===e.length?(this._removeNotEmptyClasses(),this._addEmptyClasses(),this.dispatch(t,"dom:empty")):(this._addNotEmptyClasses(),this._removeEmptyClasses(),this.dispatch(t,"dom:not-empty",{detail:{count:e.length}}))},n._removeEmptyClasses=function(){var t;this.hasEmptyClass&&(t=this.el.classList).remove.apply(t,this.emptyClasses)},n._addNotEmptyClasses=function(){var t;this.hasNotEmptyClass&&(t=this.el.classList).add.apply(t,this.notEmptyClasses)},n._addEmptyClasses=function(){var t;this.hasEmptyClass&&(t=this.el.classList).add.apply(t,this.emptyClasses)},n._removeNotEmptyClasses=function(){var t;this.hasNotEmptyClass&&(t=this.el.classList).remove.apply(t,this.notEmptyClasses)},a(e,[{key:"emptyClasses",get:function(){return this.emptyClass.split(" ")}},{key:"notEmptyClasses",get:function(){return this.notEmptyClass.split(" ")}},{key:"children",get:function(){var t=this.el;return Array.from(this.hasScopeSelectorValue?t.querySelectorAll(this.scopeSelectorValue):t.children)}}]),e}(d);G.classes=["empty","notEmpty"],G.values={scopeSelector:String};var K=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){this.toggle()},n.toggle=function(){this.hasEnablerTarget&&this.enablerTarget.checked?this.enableInputs():this.disableInputs()},n.disableInputs=function(){var t=this.hasClearValue&&this.clearValue;this.enableTargets.forEach(function(e,n){t&&(e.value=""),e.disabled=!0})},n.enableInputs=function(){this.enableTargets.forEach(function(t,e){t.disabled=!1})},e}(d);K.targets=["enabler","enable"],K.values={clear:Boolean};var Q=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.connect=function(){var t=this,e=this.el;e.onerror=function(){t.hasPlaceholderValue?e.src=t.placeholderValue:e.style.display="none"}},e}(d);Q.values={placeholder:String};var X=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.submit=function(t){null==t||t.preventDefault(),this.dispatch(this.formTarget,"submit"),this.formTarget.submit()},n.reset=function(t){null==t||t.preventDefault(),this.dispatch(this.formTarget,"reset"),this.formTarget.reset()},e}(d);X.targets=["form"];var Z=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this._clear=this._clear.bind(this)},n.connect=function(){var t=this;requestAnimationFrame(function(){if(!N(t.el))throw new Error("Expected controller to be mounted on a form element.");t._restoreOnLoad&&t.restore(),t._clearOnSubmit&&t.el.addEventListener("submit",t._clear)})},n.disconnect=function(){this._clearOnSubmit&&this.el.removeEventListener("submit",this._clear)},n._clear=function(){localStorage.removeItem(this._formIdentifier),this.dispatch(this.el,"form-save:cleared")},n.clear=function(t){null==t||t.preventDefault(),this._clear()},n.save=function(t){t.preventDefault(),localStorage.setItem(this._formIdentifier,JSON.stringify(this._formData[this._formIdentifier])),this.dispatch(this.el,"form-save:save:success")},n.restore=function(t){if(null==t||t.preventDefault(),localStorage.getItem(this._formIdentifier)){for(var e,n=JSON.parse(localStorage.getItem(this._formIdentifier)),i=h(this._formElements);!(e=i()).done;){var r=e.value;r.name in n&&(H(r)&&"checkbox"==r.type?r.checked=n[r.name]:H(r)&&"radio"==r.type?r.value==n[r.name]&&(r.checked=!0):r.value=n[r.name])}this.dispatch(this.el,"form-save:restore:success")}else this.dispatch(this.el,"form-save:restore:empty")},a(e,[{key:"_formID",get:function(){if(this.hasIdValue)return this.idValue;var t=this.el.id;if(""!==t)return t;throw new Error("No ID value to uniquely identify this form. Please either specify data-"+this.identifier+"-id-value or give this form an 'id' attribute. ")}},{key:"_formIdentifier",get:function(){return location.href+" "+this._formID}},{key:"_formElements",get:function(){return this.el.elements}},{key:"_formData",get:function(){for(var t,e,n=((t={})[this._formIdentifier]={},t),i=h(this._formElements);!(e=i()).done;){var r=e.value;r.name.length>0&&(H(r)&&"checkbox"==r.type?n[this._formIdentifier][r.name]=r.checked:H(r)&&"radio"==r.type?r.checked&&(n[this._formIdentifier][r.name]=r.value):n[this._formIdentifier][r.name]=r.value)}return n}},{key:"_restoreOnLoad",get:function(){return!this.hasRestoreOnLoadValue||this.restoreOnLoadValue}},{key:"_clearOnSubmit",get:function(){return!this.hasClearOnSubmitValue||this.clearOnSubmitValue}}]),e}(d);Z.values={id:String,restoreOnLoad:Boolean,clearOnSubmit:Boolean};var tt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){E(this,{threshold:this.threshold,element:this.el})},n.appear=function(t){this.dispatch(this.el,"intersection:appear",{detail:{element:this.el}})},n.disappear=function(t){this.dispatch(this.el,"intersection:disappear",{detail:{element:this.el}})},a(e,[{key:"threshold",get:function(){return this.hasThresholdValue?this.thresholdValue.split(",").map(function(t){return Number.parseFloat(t.trim())}).filter(function(t){return t>=0&&t<=1}):[0,1]}}]),e}(d);tt.values={threshold:String};var et,nt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){if("IntersectionObserver"in window){var t=E(this,{element:this.el,threshold:.3});this.observe=t[0],this.unobserve=t[1]}else this.loadContent()},n.appear=function(t){t.target===this.el&&t.isIntersecting&&(this.loadContent(),this.unobserve&&this.unobserve())},e}(m),it=function(t,e){var n=void 0===e?{}:e,i=n.behavior,r=void 0===i?"smooth":i,s=n.block,a=void 0===s?"start":s,o=n.inline,l=void 0===o?"nearest":o;try{var c=function(){t.scrollIntoView({behavior:r,block:a,inline:l})},u=function(){if("smooth"==r&&!rt)return Promise.resolve(function(){try{return Promise.resolve(import("smoothscroll-polyfill")).then(function(t){et||(et=!0,(0,t.polyfill)())})}catch(t){return Promise.reject(t)}}()).then(function(){})}();return Promise.resolve(u&&u.then?u.then(c):c())}catch(t){return Promise.reject(t)}},rt="scrollBehavior"in document.documentElement.style;function st(t){if(!t)return null;var e=getComputedStyle(t).overflowY;return"visible"!==e&&"hidden"!==e&&t.scrollHeight>=t.clientHeight?t:st(t.parentElement)||document.body}var at=function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._dialog=null,e}l(e,t);var n=e.prototype;return n.initialize=function(){this.open=this.open.bind(this),this.close=this.close.bind(this)},n.connect=function(){},n.open=function(){var t=this,e=this.el;if(!this._dialog){this._dialog=document.createElement("dialog");var n=document.createElement("img");n.className=this.imageClassName,n.src=this.src,n.srcset=this.srcSet,n.sizes=this.sizes,this._dialog.appendChild(n),e.insertAdjacentElement("afterend",this._dialog),i.registerDialog(this._dialog),this._dialog.className=this.modalClassName,this._dialog.showModal(),it(this._dialog,{behavior:"smooth",block:"end"}).catch(function(){return t._dialog.scrollIntoView(!1)}),this._dialog.addEventListener("click",this.close),this._dialog.addEventListener("cancel",this.close),this._dialog.addEventListener("close",this.close)}},n.close=function(){var t=this;this._dialog&&(this._dialog.close(),this._dialog.remove(),this._dialog=null,it(this.el,{behavior:"smooth",block:"end"}).catch(function(){return t.el.scrollIntoView(!1)}))},a(e,[{key:"src",get:function(){return this.hasSrcValue?this.srcValue:this.el.src}},{key:"srcSet",get:function(){return this.hasSrcSetValue?this.srcSetValue:this.el.srcset}},{key:"sizes",get:function(){return this.hasSizesValue?this.sizesValue:this.el.sizes}},{key:"modalClassName",get:function(){return this.hasModalClass?this.modalClass:"image-lightbox-dialog"}},{key:"imageClassName",get:function(){return this.hasImageClass?this.imageClass:"image-lightbox-image"}}]),e}(d);at.values={src:String,srcSet:String,sizes:String},at.classes=["modal","image"];var ot=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.handleInputs=this.handleInputs.bind(this)},n.connect=function(){var t=this;this.inputTargets.forEach(function(e){return e.addEventListener("change",t.handleInputs)})},n.disconnect=function(){var t=this;this.inputTargets.forEach(function(e){return e.removeEventListener("change",t.handleInputs)})},n.handleInputs=function(t){var e=this.inputTargets.reduce(function(t,e){return e.checked?t+1:t},0),n=t.target;e>this.maxValue?(t.preventDefault(),n.checked=!1,this.dispatch(n,"change"),this.dispatch(n,"limited-selection:too-many"),this.hasErrorTarget&&(this.errorTarget.innerHTML=this.messageValue)):(this.dispatch(n,"limited-selection:selection"),this.hasErrorTarget&&(this.errorTarget.innerHTML=""))},e}(d);ot.targets=["input","error"],ot.values={max:Number,message:String};var lt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){},n.connect=function(){},n.disconnect=function(){},n.play=function(t){try{return null==t||t.preventDefault(),Promise.resolve(this.mediaTarget.play()).then(function(){})}catch(t){return Promise.reject(t)}},n.pause=function(t){null==t||t.preventDefault(),this.mediaTarget.pause()},n.restart=function(t){null==t||t.preventDefault(),this.mediaTarget.currentTime=0},n.seek=function(t){null==t||t.preventDefault(),this.mediaTarget.currentTime+=5},e}(d);lt.targets=["media"];var ct=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){this.checkStructure()},n.add=function(t){null==t||t.preventDefault();var e=this.templateTarget.innerHTML.replace(/NEW_RECORD/g,this.generateID());this.targetTarget.insertAdjacentHTML(this.insertMode,e)},n.remove=function(t){t.preventDefault();var e=t.target.closest("."+this.wrapperClass);if(null==e)throw new Error("#remove was clicked from outside of a child record. Could not find an ancestor with class ."+this.wrapperClass);if("true"===e.dataset.newRecord)e.remove();else{e.style.display="none";var n=e.querySelector("input[name*='_destroy']");if(null==n)throw new Error("Could not find a hidden input with name '_destroy'. NestedForm cannot remove an already persisted record without it.");n.value="1"}},n.generateID=function(){return(new Date).getTime().toString()+Math.random().toString().slice(2)},n.checkStructure=function(){if(this.templateTarget.innerHTML.indexOf("NEW_RECORD"))throw new Error("Could not find 'NEW_RECORD' in the provided template. Please make sure you've passed `child_index: 'NEW_RECORD'` to `fields_for`")},a(e,[{key:"wrapperClass",get:function(){return this.hasWrapperSelectorValue?this.wrapperClassValue:"nested-fields"}},{key:"insertMode",get:function(){return this.hasInsertModeValue?this.insertModeValue:"beforeend"}}]),e}(d);ct.targets=["target","template"],ct.values={insertMode:String,wrapperClass:String};var ut=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.checkPasswordsMatch=this.checkPasswordsMatch.bind(this)},n.connect=function(){var t=this;this.passwordTargets.forEach(function(e){return e.addEventListener("change",t.checkPasswordsMatch)})},n.disconnect=function(){var t=this;this.passwordTargets.forEach(function(e){return e.removeEventListener("change",t.checkPasswordsMatch)})},n.allPasswordsMatch=function(){var t=new Set(this.passwordTargets.map(function(t){return t.value}));return t.has("")||1==t.size},n.checkPasswordsMatch=function(){var t=this,e=this.el;this.allPasswordsMatch()?(this.dispatch(e,"password-confirm:match"),this.hasErrorClass&&this.passwordTargets.forEach(function(e){return e.classList.remove(t.errorClass)})):(this.dispatch(e,"password-confirm:no-match"),this.hasErrorClass&&this.passwordTargets.forEach(function(e){return e.classList.add(t.errorClass)}))},e}(d);ut.targets=["password"],ut.classes=["error"];var ht=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.peak=function(t){null==t||t.preventDefault(),this.passwordTarget.type="text"},n.hide=function(t){null==t||t.preventDefault(),this.passwordTarget.type="password"},n.toggle=function(t){null==t||t.preventDefault(),"password"===this.passwordTarget.type?this.peak():this.hide()},e}(d);ht.targets=["password"];var dt=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.replace=function(t){var e=t.detail[0];if(e instanceof Node){var n=e.querySelector(this.selector);if(null==n)throw new Error('expected new form DOM with [data-controller="'+this.identifier+'"] to be present in returned payload');var i=this.el.parentNode;if(null==i)throw new Error("expected form to have a DOM parent, could not execute replaceChild");i.replaceChild(n,this.el)}else console.log("Unknown",e)},a(e,[{key:"selector",get:function(){return this.hasSelectorValue?this.selectorValue:'[data-controller~="'+this.identifier+'"]'}}]),e}(d);dt.targets=[],dt.values={selector:String};var ft=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.messageReceived=this.messageReceived.bind(this)},n.connect=function(){window.addEventListener("message",this.messageReceived)},n.disconnect=function(){window.removeEventListener("message",this.messageReceived)},n.messageReceived=function(t){var e=t.data;e.hasOwnProperty("name")&&"iframe-body"===e.name&&e.hasOwnProperty("height")&&this.resize(e.height)},n.resize=function(t){this.el.style.height=t+"px"},e}(d),pt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){var t,e,n;window.self!==window.top&&(C(this),e={},null===(n=(t=this).constructor.debounces)||void 0===n||n.forEach(n=>{if("string"==typeof n&&(t[n]=A(t[n],null==e?void 0:e.wait)),"object"==typeof n){const{name:i,wait:r}=n;if(!i)return;t[i]=A(t[i],r||(null==e?void 0:e.wait))}}),this.postUpdate())},n.windowResize=function(t){this.postUpdate()},n.postUpdate=function(){var t={name:"iframe-body",height:this.getHeight()};window.parent.postMessage(t,"*")},n.getHeight=function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},e}(d);pt.debounces=["postUpdate"];var mt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n._cleanupSelf=function(){this.cleanup(this.el)},n.cleanup=function(t){var e,n,i,s=this;t.dataset.controller=(null==(e=t.dataset.controller)?void 0:e.replaceAll(new RegExp("(s|^)"+this.identifier+"(s|$)","g"),""))||"",""==t.dataset.controller&&delete t.dataset.controller;var a=new RegExp("(s|^)"+this.identifier+"\\..+?(s|$)","g");t.dataset.target=(null==(n=t.dataset.target)?void 0:n.replaceAll(a,""))||"",delete t.dataset[r(this.identifier+"-target")],""==t.dataset.target&&delete t.dataset.target,t.dataset.action=(null==(i=t.dataset.target)?void 0:i.replaceAll(a,""))||"",delete t.dataset[r(this.identifier+"-action")],""==t.dataset.action&&delete t.dataset.action;var o=this.constructor.values;o&&Object.keys(o).forEach(function(e){return delete t.dataset[r(s.identifier+"-"+e+"-value")]});var l=this.constructor.classes;l&&Object.keys(l).forEach(function(e){return delete t.dataset[r(s.identifier+"-"+e+"-class")]})},e}(d),vt=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.connect=function(){var t=this;requestAnimationFrame(function(){it(t.el,{behavior:t.hasBehaviorValue?t.behaviorValue:"smooth",block:t.hasBlockValue?t.blockValue:"center",inline:t.hasInlineValue?t.inlineValue:"center"}).catch(function(){return t.el.scrollIntoView()}),t._cleanupSelf()})},e}(mt);vt.values={behavior:String,block:String,inline:String};var gt=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.scroll=function(t){var e;null==t||t.preventDefault(),null!=(e="document"==(this.hasModeValue?this.modeValue:"document")?document.body:st(this.el))&&it(e,{behavior:"smooth",block:"end"}).catch(function(){return e.scrollIntoView(!1)})},e}(d);gt.values={mode:String};var yt=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.scroll=function(){var t=document.querySelector(this.selectorValue);t?it(t,{behavior:this.hasBehaviorValue?this.behaviorValue:"smooth",block:this.hasBlockValue?this.blockValue:"center",inline:this.hasInlineValue?this.inlineValue:"center"}).catch(function(){return t.scrollIntoView()}):console.warn("Could not find target for '"+this.selectorValue+"'")},e}(d);yt.values={selector:String,behavior:String,block:String,inline:String};var bt=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.prototype.scroll=function(t){var e;null==t||t.preventDefault(),null!=(e="document"==(this.hasModeValue?this.modeValue:"document")?document.body:st(this.el))&&it(e,{behavior:"smooth",block:"start"}).catch(function(){return e.scrollIntoView(!1)})},e}(d);bt.values={mode:String};var _t=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).timeout=null,e}l(e,t);var n=e.prototype;return n.connect=function(){var t=this;requestAnimationFrame(function(){t.timeout=setTimeout(function(){return t.el.remove()},1e3*t.secondsValue)})},n.disconnect=function(){this.timeout&&clearTimeout(this.timeout)},e}(d);_t.values={seconds:Number};var Et=function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._magicElement=null,e}l(e,t);var n=e.prototype;return n.createMagicElement=function(){if(null===this._magicElement)switch(this._magicElement=document.createElement("div"),this._mode){case"top":this.el.insertAdjacentElement("beforebegin",this._magicElement);break;case"bottom":this.el.insertAdjacentElement("afterend",this._magicElement)}},n.connect=function(){var t=this,e=this.el;this.createMagicElement(),new IntersectionObserver(function(n){n.forEach(function(n){n.target===t._magicElement&&(0===n.intersectionRatio?e.classList.add(t.hasStuckClass?t.stuckClass:"stuck"):1===n.intersectionRatio&&e.classList.remove(t.hasStuckClass?t.stuckClass:"stuck"))})},{threshold:[0,1]}).observe(this._magicElement)},a(e,[{key:"_mode",get:function(){return this.hasModeValue?this.modeValue:"top"}}]),e}(d);Et.classes=["stuck"],Et.values={mode:String};var wt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._lastIndex=null,e._reverse=!1,e}l(e,t);var n=e.prototype;return n.initialize=function(){this.sort=this.sort.bind(this)},n.connect=function(){var t=this;requestAnimationFrame(function(){t._tableHeaders.forEach(function(e){return e.addEventListener("click",t.sort)}),t.hasStartSortValue&&t._sortByColumn(t.startSortValue)})},n.disconnect=function(){var t=this;this._tableHeaders.forEach(function(e){return e.removeEventListener("click",t.sort)})},n.sort=function(t){t.preventDefault();var e=this._indexOfHeaderCell(t.target);this._sortByColumn(e)},n._indexOfHeaderCell=function(t){return this._tableHeaders.indexOf(t)},n._sortByColumn=function(t){var e=this;this._reverse=t===this._lastIndex&&!this._reverse;var n=document.createDocumentFragment();this._tableRows.sort(function(n,i){var r,s,a=Array.from(n.cells),o=Array.from(i.cells),l=(null==(r=a[t])?void 0:r.innerText)||"",c=(null==(s=o[t])?void 0:s.innerText)||"",u=l.localeCompare(c,"en",{sensitivity:"base",numeric:!0,caseFirst:"upper"});return n.dataset.sortTop||i.dataset.sortBottom?n.dataset.sortTop&&i.dataset.sortTop?u:-1:n.dataset.sortBottom||i.dataset.sortTop?n.dataset.sortBottom&&i.dataset.sortBottom?u:1:e._reverse?u>0?-1:1:u}).forEach(function(t){return n.appendChild(t)}),this._tableBody.innerHTML="",this._tableBody.appendChild(n),this._lastIndex=t},a(e,[{key:"_tableHead",get:function(){var t=this.el.tHead;if(null==t)throw new Error("Expected table to have a <thead> element.");return t}},{key:"_tableHeaders",get:function(){var t=this._tableHead.rows;if(0==t.length)throw new Error("Expected table to have a <thead> element with at least one row.");return Array.from(t[0].cells)}},{key:"_tableBody",get:function(){return this.el.tBodies[0]}},{key:"_tableRows",get:function(){return Array.from(this._tableBody.rows)}}]),e}(d);wt.values={startSort:Number};var kt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.truncate=this.truncate.bind(this),this.expand=this.expand.bind(this)},n.connect=function(){var t=this;L(this,{childList:!0,element:this._tableBody}),requestAnimationFrame(function(){t.truncate(),t.showMoreTarget.addEventListener("click",t.expand)})},n.truncate=function(t){var e=this;null==t||t.preventDefault(),this._truncated=!0,this._tableRows.length>=this._limit?(this._tableRows.slice(this._limit).forEach(function(t){t!==e.showMoreTarget&&e._hideElement(t)}),this._showElement(this.showMoreTarget)):this._hideElement(this.showMoreTarget)},n.expand=function(t){var e=this;this._truncated=!1,null==t||t.preventDefault(),this._tableRows.slice(this._limit).forEach(function(t){t!==e.showMoreTarget&&e._showElement(t)}),this._hideElement(this.showMoreTarget)},n.mutate=function(t){this._truncated&&this._reTruncate()},n._showElement=function(t){t.style.display=""},n._hideElement=function(t){t.style.display="none"},n._reTruncate=function(){var t=this;this._tableRows.slice(0,this._limit).forEach(function(e){e!==t.showMoreTarget&&t._showElement(e)}),this._tableRows.slice(this._limit).forEach(function(e){e!==t.showMoreTarget&&t._hideElement(e)}),this._showElement(this.showMoreTarget)},a(e,[{key:"_truncated",get:function(){return!!this.hasTruncatedValue&&this.truncatedValue},set:function(t){this.truncatedValue=t}},{key:"_tableBody",get:function(){return this.el.tBodies[0]}},{key:"_tableRows",get:function(){return Array.from(this._tableBody.rows)}},{key:"_limit",get:function(){return this.hasLimitValue?this.limitValue:20}}]),e}(d);kt.targets=["showMore"],kt.values={limit:Number,truncated:Boolean};var Vt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){var t=this;if(!this.hasInsertValue)throw new Error("`insert` value was not specified");requestAnimationFrame(function(){t.hasImmediateValue&&t.immediateValue&&t.execute()})},n.execute=function(t){null==t||t.preventDefault();var e=this.el,n=document.querySelector(this.targetValue);if(null!=n){var i=e.cloneNode(!0);switch(this.cleanup(i),this.insertValue){case"beforebegin":case"beforeend":case"afterend":case"afterbegin":n.insertAdjacentHTML(this.insertValue,i.outerHTML);break;case"replaceOuter":n.outerHTML=i.outerHTML;break;case"replaceInner":n.innerHTML=i.outerHTML;break;case"prepend":n.insertAdjacentHTML("afterbegin",i.outerHTML);break;case"append":n.insertAdjacentHTML("beforeend",i.outerHTML);break;default:throw new Error("`insert` value was not specified")}e.remove()}else this.dispatch(e,"teleport:error")},e}(mt);Vt.values={target:String,insert:String,immediate:Boolean};var Tt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.connect=function(){var t=this;if(!this.hasClassValue)throw new Error("data-toggle-class-class-value must not be empty");(this.hasMouseEnterValue||this.hasMouseLeaveValue)&&((t,e={})=>{new T(this,e)})(),this.hasClickAwayValue&&this.clickAwayValue&&((t,e={})=>{const{onlyVisible:n,dispatchEvent:i,events:r,eventPrefix:s}=Object.assign({},w,e),a=r=>{const a=(null==e?void 0:e.element)||t.element;if(!(a.contains(r.target)||!function(t){const e=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth;return e.top<=n&&e.top+e.height>=0&&e.left<=i&&e.left+e.width>=0}(a)&&n)&&(t.clickOutside&&t.clickOutside(r),i)){const e=y("click:outside",t,s),n=b(e,r,{controller:t});a.dispatchEvent(n)}},o=t.disconnect.bind(t);Object.assign(t,{disconnect(){null==r||r.forEach(t=>{window.removeEventListener(t,a,!1)}),o()}}),null==r||r.forEach(t=>{window.addEventListener(t,a,!1)})})(this),requestAnimationFrame(function(){t.hasInitialValue&&t.toggleTargets.forEach("on"===t.initialValue?function(e){return t.elementOn(e)}:function(e){return t.elementOff(e)})})},n.clickOutside=function(){var t=this;this.toggleTargets.forEach(function(e){t.elementWasToggled(e)&&(t.elementToggleStatus(e),t.elementToggle(e))})},n.mouseEnter=function(){if(this.hasMouseEnterValue)switch(this.mouseEnterValue){case"on":this.on();break;case"off":this.off();break;case"toggle":this.toggle()}return{}},n.mouseLeave=function(){if(this.hasMouseLeaveValue)switch(this.mouseLeaveValue){case"on":this.on();break;case"off":this.off();break;case"toggle":this.toggle()}return{}},n.on=function(t){var e=this;this.toggleTargets.forEach(function(t){e.elementToggleStatus(t),e.elementOn(t)})},n.off=function(t){var e=this;this.toggleTargets.forEach(function(t){e.elementToggleStatus(t),e.elementOff(t)})},n.toggle=function(t){var e=this;this.toggleTargets.forEach(function(t){e.elementToggleStatus(t),e.elementToggle(t)})},n.elementWasToggled=function(t){return"true"==t.dataset.toggled},n.elementToggleStatus=function(t){this.elementWasToggled(t)?delete t.dataset.toggled:t.dataset.toggled="true"},n.elementToggle=function(t){this.classValue.split(" ").forEach(function(e){return t.classList.toggle(e)})},n.elementOn=function(t){this.classValue.split(" ").forEach(function(e){return t.classList.toggle(e,!0)})},n.elementOff=function(t){this.classValue.split(" ").forEach(function(e){return t.classList.toggle(e,!1)})},e}(d);function St(t){return"TURBO-FRAME"==t.nodeName}Tt.targets=["toggle"],Tt.values={class:String,mouseEnter:String,mouseLeave:String,clickAway:Boolean,initial:String};var Lt=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.toggle=function(t){null==t||t.preventDefault();var e=this._getFrame().src;null==e||e!==this._getSrc()?this._setSrc():this._clear()},n.setSrc=function(t){null==t||t.preventDefault(),this._setSrc()},n.clear=function(t){null==t||t.preventDefault(),this._clear()},n._setSrc=function(){var t=this._getFrame();this.hasLoadingMessageValue&&(t.innerHTML=this.loadingMessageValue),t.src=this._getSrc()},n._clear=function(){var t=this._getFrame();t.src="",t.innerHTML=""},n._getFrame=function(){var t=document.getElementById(""+this.frameIdValue);if(null==t)throw new Error("Could not find frame with ID '"+this.frameIdValue+"'");if(St(t))return t;throw new Error("Element targeted by ID '"+this.frameIdValue+"'")},n._getSrc=function(){var t=this.el;if(this.hasSrcValue)return this.srcValue;if(O(t))return t.href;throw new Error("No link given to drive frame to")},e}(d);Lt.values={frameId:String,src:String,loadingMessage:String};var Ct=function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._timeoutHandle=null,e}l(e,t);var n=e.prototype;return n.initialize=function(){this.refresh=this.refresh.bind(this)},n.connect=function(){var t=this,e=this.el;if(!St(e))throw new Error("Expected controller to be mounted on a <turbo-frame> element.");if(e.src)throw new Error("The provided <turbo-frame> element has no `src` attribute.");this.poll&&requestAnimationFrame(function(){return t._timeoutHandle=setTimeout(function(){return t.refresh()},t.intervalValue)})},n.disconnect=function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)},n.refresh=function(t){null==t||t.preventDefault();var e=this.el;e.src=e.src},a(e,[{key:"poll",get:function(){return!!this.hasPollValue&&this.pollValue}}]),e}(d);Ct.values={interval:Number,poll:Boolean};var At=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var n=e.prototype;return n.initialize=function(){this.updateWordCount=this.updateWordCount.bind(this)},n.connect=function(){this.updateWordCount(),this.inputTarget.addEventListener("input",this.updateWordCount)},n.disconnect=function(){this.inputTarget.removeEventListener("input",this.updateWordCount)},n.updateWordCount=function(){var t=0,e=this.inputTarget.value.match(/\S+/g);this.outputTarget.innerText=(t=e&&e.length||0).toString(),this.hasErrorClass&&(this.isValidCount(t)?this.outputTarget.classList.remove(this.errorClass):this.outputTarget.classList.add(this.errorClass))},n.isValidCount=function(t){var e=0,n=99999;return this.hasMinValue&&(e=this.minValue),this.hasMaxValue&&(n=this.maxValue),t>=e&&t<=n},e}(d);At.targets=["input","output"],At.values={min:Number,max:Number},At.classes=["error"];export{f as AnchorSpyController,p as AppearanceController,m as AsyncBlockController,v as AutoSubmitFormController,D as AutosizeController,I as CharCountController,x as CheckboxSelectAllController,M as ClipboardController,P as ConfirmController,j as ConfirmNavigationController,F as DebugController,q as DetectDirtyController,W as DetectDirtyFormController,$ as DisableInputsController,U as DisableWithController,J as DismissableController,Y as ElementSaveController,G as EmptyDomController,K as EnableInputsController,Q as FallbackImageController,X as FormRcController,Z as FormSaveController,tt as IntersectionController,nt as LazyBlockController,at as LightboxImageController,ot as LimitedSelectionCheckboxesController,lt as MediaPlayerController,ct as NestedFormController,ut as PasswordConfirmController,ht as PasswordPeekController,dt as RemoteFormController,pt as ResponsiveIframeBodyController,ft as ResponsiveIframeWrapperController,vt as ScrollIntoFocusController,gt as ScrollToBottomController,yt as ScrollToController,bt as ScrollToTopController,_t as SelfDestructController,Et as StickyController,wt as TableSortController,kt as TableTruncateController,Vt as TeleportController,Tt as ToggleClassController,Lt as TurboFrameRCController,Ct as TurboFrameRefreshController,At as WordCountController};
//# sourceMappingURL=stimulus-library.module.js.map
