!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("stimulus"),require("lodash-es/get"),require("lodash-es/set"),require("dialog-polyfill"),require("camelcase")):"function"==typeof define&&define.amd?define(["exports","stimulus","lodash-es/get","lodash-es/set","dialog-polyfill","camelcase"],t):t((e||self).stimulusLibrary={},e.stimulus,e._get,e._set,e.dialogPolyfill,e.camelcase)}(this,function(e,t,n,i,r,s){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(n),l=o(i),c=o(r),u=o(s);function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}var b=function(e){function t(t){var n;return n=e.call(this,t)||this,new Proxy(p(n),{get:function(e,t){var i=Reflect.get(e,t),r=p(n);if(function(e){switch(e){case"application":case"el":case"element":case"constructor":case"initialize":case"log":case"logEvent":case"dispatch":case"data":case"valueDescriptorMap":case"mutate":case"identifier":return!1}return!(/^_.*?$/.test(e)||/^.*?Target(s)?$/.test(e)||/^.*?Value$/.test(e)||/^.*?ValueChanged$/.test(e)||/^.*?Class$/.test(e)||/^.*?Classes$/.test(e))}(t.toString())){if("function"==typeof i)return new Proxy(i,{apply:function(e,n,i){return r.log(t.toString(),{args:i}),Reflect.apply(e,n,i)}});n.log(t.toString())}return i}})||p(n)}m(t,e);var n=t.prototype;return n.dispatch=function(e,t,n){void 0===n&&(n={});var i=Object.assign({},{bubbles:!0,cancelable:!0,detail:{target:e}},n);i.detail.target&&(i.detail.target=e);var r=new CustomEvent(t,i);this.logEvent(t,r,e),e.dispatchEvent(r)},n.log=function(e,t){if(void 0===t&&(t={}),this.application.debug){var n=console;n.groupCollapsed("%c"+this.identifier+" %c#"+e,"color: #3B82F6","color: unset"),n.log(f({element:this.element},t)),n.groupEnd()}},n.logEvent=function(e,t,n){if(this.application.debug){var i=console;i.groupCollapsed("%c"+this.identifier+" %c"+e+"%c","color: #3B82F6","color: #0be000","color: unset"),i.log({element:n}),i.groupEnd()}},d(t,[{key:"el",get:function(){return this.element}}]),t}(t.Controller),y=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this._checkAnchor=this._checkAnchor.bind(this)},n.connect=function(){var e=this;requestAnimationFrame(function(){e._checkAnchor(),window.addEventListener("hashchange",e._checkAnchor)})},n.disconnect=function(){window.removeEventListener("hashchange",this._checkAnchor)},n.write=function(e){null==e||e.preventDefault(),this._anchor=this._key},n._checkAnchor=function(){this.dispatch(this.el,this._key===this._anchor?"anchor-spy:active":"anchor-spy:inactive")},d(t,[{key:"_key",get:function(){return this.keyValue.replaceAll("#","")}},{key:"_anchor",get:function(){return window.location.hash.substr(1)},set:function(e){window.location.hash=e}}]),t}(b);y.values={key:String};var _=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this._handleVisibility=this._handleVisibility.bind(this)},n.connect=function(){var e=this;window.addEventListener("focus",this._handleVisibility),window.addEventListener("blur",this._handleVisibility),document.addEventListener("visibilitychange",this._handleVisibility),requestAnimationFrame(function(){e._handleVisibility()})},n.disconnect=function(){window.removeEventListener("focus",this._handleVisibility),window.removeEventListener("blur",this._handleVisibility),document.removeEventListener("visibilitychange",this._handleVisibility)},n.appear=function(){this.dispatch(this.el,"appearance:appear")},n.away=function(){this.dispatch(this.el,"appearance:away")},n._handleVisibility=function(){this._documentIsActive()?this.appear():this.away()},n._documentIsActive=function(){return"visible"==document.visibilityState&&document.hasFocus()},t}(b),E=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){this.loadContent()},n.loadContent=function(){var e=this,t=this,n=this.hasReplaceTarget?this.replaceTarget:this.el;fetch(this.endpointValue).then(function(e){return e.text()}).then(function(i){var r=document.createElement("div");if(r.innerHTML=i,e.hasSelectorValue){var s=r.querySelectorAll(e.selectorValue);n.replaceWith.apply(n,s)}else n.replaceWith.apply(n,r.children);t.dispatch(n,"ajax:success")}).catch(function(i){n.replaceWith(e._errorMessage),t.dispatch(n,"ajax:error")}).finally(function(){t.dispatch(n,"ajax:complete")})},d(t,[{key:"_errorMessage",get:function(){return this.hasErrorMessageValue?this.errorMessageValue:"This content failed to load"}}]),t}(b);E.targets=["replace"],E.values={endpoint:String,errorMessage:String,selector:String};var w=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.submit=this.submit.bind(this)},n.connect=function(){var e=this;this.el.querySelectorAll("input, select, textarea").forEach(function(t){return t.addEventListener("change",e.submit)})},n.disconnect=function(){var e=this;this.el.querySelectorAll("input, select, textarea").forEach(function(t){return t.removeEventListener("change",e.submit)})},n.submit=function(){this.dispatch(this.el,"submit")},t}(b);const k=(e,t)=>{const n=e[t];return"function"==typeof n?n:(...e)=>{}},C=(e,t,n)=>{let i=e;return!0===n?i=`${t.identifier}:${e}`:"string"==typeof n&&(i=`${n}:${e}`),i},T=(e,t,n)=>{const{bubbles:i,cancelable:r,composed:s}=t||{bubbles:!0,cancelable:!0,composed:!0};return t&&Object.assign(n,{originalEvent:t}),new CustomEvent(e,{bubbles:i,cancelable:r,composed:s,detail:n})},V={dispatchEvent:!0,eventPrefix:!0},S=(e,t={})=>{const{dispatchEvent:n,eventPrefix:i}=Object.assign({},V,t),r=(null==t?void 0:t.element)||e.element,s=e.disconnect.bind(e),o=new IntersectionObserver(t=>{const[s]=t;s.isIntersecting?(t=>{if(e.isVisible=!0,k(e,"appear").call(e,t),n){const n=C("appear",e,i),s=T(n,null,{controller:e,entry:t});r.dispatchEvent(s)}})(s):e.isVisible&&(t=>{if(e.isVisible=!1,k(e,"disappear").call(e,t),n){const n=C("disappear",e,i),s=T(n,null,{controller:e,entry:t});r.dispatchEvent(s)}})(s)},t),a=()=>{o.observe(r)},l=()=>{o.unobserve(r)};return Object.assign(e,{isVisible:!1,disconnect(){l(),s()}}),a(),[a,l]},L={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},A={debug:!1,logger:console};class D{constructor(e,t={}){var n,i,r;this.log=(e,t)=>{this.debug&&(this.logger.groupCollapsed(`%c${this.controller.identifier} %c#${e}`,"color: #3B82F6","color: unset"),this.logger.log(Object.assign({controllerId:this.controllerId},t)),this.logger.groupEnd())},this.debug=null!==(i=null!==(n=null==t?void 0:t.debug)&&void 0!==n?n:e.application.stimulusUseDebug)&&void 0!==i?i:A.debug,this.logger=null!==(r=null==t?void 0:t.logger)&&void 0!==r?r:A.logger,this.controller=e,this.controllerId=e.element.id||e.element.dataset.id,this.controllerInitialize=e.initialize.bind(e),this.controllerConnect=e.connect.bind(e),this.controllerDisconnect=e.disconnect.bind(e)}}class I extends D{constructor(e,t={}){super(e,t),this.observe=()=>{this.targetElement.addEventListener("mouseenter",this.onEnter),this.targetElement.addEventListener("mouseleave",this.onLeave)},this.unobserve=()=>{this.targetElement.removeEventListener("mouseenter",this.onEnter),this.targetElement.removeEventListener("mouseleave",this.onLeave)},this.onEnter=()=>{k(this.controller,"mouseEnter").call(this.controller),this.log("mouseEnter",{hover:!0})},this.onLeave=()=>{k(this.controller,"mouseLeave").call(this.controller),this.log("mouseLeave",{hover:!1})},this.targetElement=(null==t?void 0:t.element)||e.element,this.controller=e,this.enhanceController(),this.observe()}enhanceController(){const e=this.controller.disconnect.bind(this.controller);Object.assign(this.controller,{disconnect:()=>{this.unobserve(),e()}})}}class x extends D{constructor(e,t={}){super(e,t),this.observe=()=>{try{this.observer.observe(this.targetElement,this.options)}catch(e){this.controller.application.handleError(e,"At a minimum, one of childList, attributes, and/or characterData must be true",{})}},this.unobserve=()=>{this.observer.disconnect()},this.mutation=e=>{k(this.controller,"mutate").call(this.controller,e),this.log("mutate",{entries:e})},this.targetElement=(null==t?void 0:t.element)||e.element,this.controller=e,this.options=t,this.observer=new MutationObserver(this.mutation),this.enhanceController(),this.observe()}enhanceController(){const e=this.controller.disconnect.bind(this.controller);Object.assign(this.controller,{disconnect:()=>{this.unobserve(),e()}})}}const M=(e,t={})=>{const n=new x(e,t);return[n.observe,n.unobserve]},N=e=>{const t=t=>{const{innerWidth:n,innerHeight:i}=window,r={height:i||Infinity,width:n||Infinity,event:t};k(e,"windowResize").call(e,r)},n=e.disconnect.bind(e),i=()=>{window.addEventListener("resize",t),t()},r=()=>{window.removeEventListener("resize",t)};return Object.assign(e,{disconnect(){r(),n()}}),i(),[i,r]},O=(e,t=200)=>{let n=null;return function(){const i=arguments,r=this,s=()=>e.apply(r,i);n&&clearTimeout(n),n=setTimeout(s,t)}};var H=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this._handler=this._handler.bind(this)},n.connect=function(){var e=this;N(this),requestAnimationFrame(function(){e._handler();var t=e.el;t.style.resize="none",t.style.boxSizing="border-box",t.addEventListener("input",e._handler),t.addEventListener("focus",e._handler)})},n.disconnect=function(){this.el.removeEventListener("input",this._handler),this.el.removeEventListener("focus",this._handler)},n.windowResize=function(){this._handler()},n._handler=function(){this.autosize(this.el)},n.autosize=function(e){var t=e.offsetHeight-e.clientHeight;e.style.height="auto",e.style.height=e.scrollHeight+t+"px"},t}(b),R=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this._updateCharCount=this._updateCharCount.bind(this)},n.connect=function(){var e=this;requestAnimationFrame(function(){e.inputTarget.addEventListener("input",e._updateCharCount),e._updateCharCount()})},n.disconnect=function(){this.inputTarget.removeEventListener("input",this._updateCharCount)},n._updateCharCount=function(){var e=this.inputTarget.value.length;this.outputTarget.innerText=e.toString(),this.hasErrorClass&&(this._isValidCount(e)?this.outputTarget.classList.remove(this.errorClass):this.outputTarget.classList.add(this.errorClass))},n._isValidCount=function(e){var t=0,n=99999;return this.hasMinValue&&(t=this.minValue),this.hasMaxValue&&(n=this.maxValue),e>=t&&e<=n},t}(b);R.targets=["input","output"],R.values={min:Number,max:Number},R.classes=["error"];var z=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this._toggle=this._toggle.bind(this),this._refresh=this._refresh.bind(this)},n.connect=function(){var e=this;requestAnimationFrame(function(){e.hasSelectAllTarget&&(e.selectAllTarget.addEventListener("change",e._toggle),e.checkboxTargets.forEach(function(t){return t.addEventListener("change",e._refresh)}),e._refresh())})},n.disconnect=function(){var e=this;this.hasSelectAllTarget&&(this.selectAllTarget.removeEventListener("change",this._toggle),this.checkboxTargets.forEach(function(t){return t.removeEventListener("change",e._refresh)}))},n._toggle=function(e){e.preventDefault();var t=e.target;this.checkboxTargets.forEach(function(e){return e.checked=t.checked})},n._refresh=function(){var e=this.checkboxTargets.length,t=this._checked.length;this.selectAllTarget.checked=t>0,this.selectAllTarget.indeterminate=t>0&&t<e},d(t,[{key:"_checked",get:function(){return this.checkboxTargets.filter(function(e){return e.checked})}},{key:"_unchecked",get:function(){return this.checkboxTargets.filter(function(e){return!e.checked})}}]),t}(b);z.targets=["selectAll","checkbox"];var F=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._supported=!1,t}m(t,e);var n=t.prototype;return n.connect=function(){this._supported=document.queryCommandSupported("copy"),this.hasRemoveUnusedValue&&this.removeUnusedValue&&(this._supported&&this.hasFallbackTarget?this.fallbackTarget.remove():this.hasCopyTarget&&this.copyTarget.remove())},n.select=function(e){e&&e.preventDefault(),this.sourceTarget.select()},n.copy=function(e){e&&e.preventDefault(),this.sourceTarget.select(),this._supported&&document.execCommand("copy")},t}(b);function B(e){return"A"==e.nodeName}function q(e){return"FORM"==e.nodeName}function j(e){return"INPUT"==e.nodeName}function P(e){return"BUTTON"==e.nodeName}function W(e){return"SELECT"==e.nodeName}function $(e){return j(e)&&("radio"===e.type||"checkbox"===e.type)}F.targets=["source","button","copy","fallback"],F.values={removeUnused:Boolean};var U=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.confirm=this.confirm.bind(this)},n.connect=function(){var e=this;requestAnimationFrame(function(){var t=e.el;if(q(t))t.addEventListener("submit",e.confirm);else{if(!B(t))throw new Error("Can't handle confirmation on attached element");t.addEventListener("click",e.confirm)}})},n.disconnect=function(){var e=this.el;q(e)?e.removeEventListener("submit",this.confirm):B(e)&&e.removeEventListener("click",this.confirm)},n.confirm=function(e){window.confirm(this._message)||(e.preventDefault(),this.dispatch(this.el,"confirm:cancelled"))},d(t,[{key:"_message",get:function(){return this.hasMessageValue?this.messageValue:"Are you sure?"}}]),t}(b);U.values={message:String};var J=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.allowSubmit=this.allowSubmit.bind(this),this.confirmNavigation=this.confirmNavigation.bind(this),this.confirmTurboNavigation=this.confirmTurboNavigation.bind(this)},n.connect=function(){var e=this;window.onbeforeunload=function(){return e._message},window.addEventListener("popstate",this.confirmNavigation),window.addEventListener("submit",this.allowSubmit),window.addEventListener("turbolinks:before-visit",this.confirmTurboNavigation),window.addEventListener("turbo:before-visit",this.confirmTurboNavigation)},n.disconnect=function(){window.removeEventListener("popstate",this.confirmNavigation),window.onbeforeunload=null,window.removeEventListener("submit",this.allowSubmit),window.removeEventListener("turbolinks:before-visit",this.confirmTurboNavigation),window.removeEventListener("turbo:before-visit",this.confirmTurboNavigation)},n.allowSubmit=function(e){window.removeEventListener("popstate",this.confirmNavigation),window.onbeforeunload=null},n.confirmNavigation=function(e){return!1},n.confirmTurboNavigation=function(e){confirm(this._message)||e.preventDefault()},d(t,[{key:"_message",get:function(){return this.hasMessageValue?this._messageValue:"Do you want to leave this page? Changes you made may not be saved"}}]),t}(b);J.values={_message:String};var Y=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.connect=function(){console.log("Debug Controller",this,this.testTargets)},t}(b);Y.targets=["test"];var G=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this._checkDirty=this._checkDirty.bind(this)},n.connect=function(){var e=this.el;this._cacheLoadValues(),this._checkDirty(),e.addEventListener("input",this._checkDirty),e.addEventListener("change",this._checkDirty)},n.disconnect=function(){var e=this.el;e.removeEventListener("input",this._checkDirty),e.removeEventListener("change",this._checkDirty)},n.restore=function(e){null==e||e.preventDefault(),this._restoreElementFromLoadValue()},n._getElementValue=function(){var e=this.el;return $(e)?e.checked:e.value},n._getElementLoadValue=function(){var e=this.el,t=e.getAttribute(this._cacheAttrName);return $(e)?null==t?e.defaultChecked:"true"==t:(null!==t||W(e)&&Array.from(e.options).forEach(function(t){if(t.defaultSelected)return e.value=t.value,t.value}),t)},n._elementHasCachedLoadValue=function(){return this.el.hasAttribute(this._cacheAttrName)},n._checkDirty=function(){var e=this.el;this._isElementDirty()?e.setAttribute("data-dirty","true"):e.removeAttribute("data-dirty")},n._isElementDirty=function(){return this._getElementValue()!==this._getElementLoadValue()},n._restoreElementFromLoadValue=function(){var e=this.el,t=e.getAttribute(this._cacheAttrName);$(e)?(e.setAttribute(this._cacheAttrName,e.checked.toString()),e.checked=null==t?e.defaultChecked:"true"==t):W(e)?null==t?Array.from(e.options).forEach(function(t){t.defaultSelected&&(e.value=t.value)}):e.value=t:e.value=null==t?e.defaultValue:t},n._cacheLoadValues=function(){var e=this.el;!this._elementHasCachedLoadValue()&&$(e)?e.setAttribute(this._cacheAttrName,e.checked.toString()):e.setAttribute(this._cacheAttrName,e.value.toString())},d(t,[{key:"_cacheAttrName",get:function(){return"detect-dirty-load-value"}}]),t}(b),K=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this._checkDirty=this._checkDirty.bind(this)},n.connect=function(){var e=this.el;this._cacheLoadValues(),this._checkDirty(),e.addEventListener("input",this._checkDirty),e.addEventListener("change",this._checkDirty)},n.disconnect=function(){var e=this.el;e.removeEventListener("input",this._checkDirty),e.removeEventListener("change",this._checkDirty)},n.restore=function(e){var t=this;null==e||e.preventDefault(),this._formElements.forEach(function(e){return t._restoreElementFromLoadValue(e)})},n._getElementValue=function(e){return $(e)?e.checked:e.value},n._getElementLoadValue=function(e){var t=e.getAttribute(this._cacheAttrName);return $(e)?null==t?e.defaultChecked:"true"==t:(null!==t||W(e)&&Array.from(e.options).forEach(function(t){if(t.defaultSelected)return e.value=t.value,t.value}),t)},n._elementHasCachedLoadValue=function(e){return e.hasAttribute(this._cacheAttrName)},n._checkElementDirty=function(e){this._isElementDirty(e)?e.setAttribute("data-dirty","true"):e.removeAttribute("data-dirty")},n._isElementDirty=function(e){return this._getElementValue(e)!==this._getElementLoadValue(e)},n._cacheElementLoadValue=function(e){!this._elementHasCachedLoadValue(e)&&$(e)?e.setAttribute(this._cacheAttrName,e.checked.toString()):e.setAttribute(this._cacheAttrName,e.value.toString())},n._restoreElementFromLoadValue=function(e){var t=e.getAttribute(this._cacheAttrName);$(e)?(e.setAttribute(this._cacheAttrName,e.checked.toString()),e.checked=null==t?e.defaultChecked:"true"==t):W(e)?null==t?Array.from(e.options).forEach(function(t){t.defaultSelected&&(e.value=t.value)}):e.value=t:e.value=null==t?e.defaultValue:t},n._cacheLoadValues=function(){var e=this;this._formElements.forEach(function(t){return e._cacheElementLoadValue(t)})},n._checkDirty=function(){var e=this;this._formElements.forEach(function(t){return e._checkElementDirty(t)}),this._formElements.some(function(e){return e.hasAttribute("data-dirty")})?this.el.setAttribute("data-dirty","true"):this.el.removeAttribute("data-dirty")},d(t,[{key:"_formElements",get:function(){return Array.from(this.el.querySelectorAll("input, select, textarea"))}},{key:"_cacheAttrName",get:function(){return"detect-dirty-load-value"}}]),t}(b),Q=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){this.toggle()},n.toggle=function(){this.hasDisablerTarget&&this.disablerTarget.checked?this.disableInputs():this.enableInputs()},n.disableInputs=function(){var e=this.hasClearValue&&this.clearValue;this.disableTargets.forEach(function(t,n){e&&(t.value=""),t.disabled=!0})},n.enableInputs=function(){this.disableTargets.forEach(function(e,t){e.disabled=!1})},t}(b);Q.targets=["disabler","disable"],Q.values={clear:Boolean};var X=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.enable=this.enable.bind(this),this.disable=this.disable.bind(this)},n.connect=function(){var e=this;requestAnimationFrame(function(){e.el.addEventListener("click",e.disable)})},n.disconnect=function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)},n.disable=function(e){var t=this.el;this._isDisabled(t)?(null==e||e.preventDefault(),null==e||e.stopImmediatePropagation()):(this._cacheText=this._getElText(t),this._setElText(t,this._message),this._disable(t),setTimeout(this.enable,this._timeout))},n.enable=function(e){null==e||e.preventDefault();var t=this.el;this._isDisabled(t)&&(this._setElText(t,this._cacheText),this._enable(t))},n._isDisabled=function(e){return j(e)&&"submit"==e.type||P(e)?e.disabled:"true"==e.dataset.disabled},n._getElText=function(e){return j(e)&&"submit"==e.type?e.value:e.innerText},n._setElText=function(e,t){j(e)&&"submit"==e.type?e.value=t:(P(e)||B(e))&&(e.innerText=t)},n._disable=function(e){j(e)&&"submit"==e.type||P(e)?e.disabled=!0:e.dataset.disabled="true"},n._enable=function(e){j(e)&&"submit"==e.type||P(e)?e.disabled=!1:e.dataset.disabled=void 0},d(t,[{key:"_message",get:function(){return this.hasMessageValue?this.messageValue:"Submitting..."}},{key:"_timeout",get:function(){return this.hasTimeoutValue?this.timeoutValue:1e3}}]),t}(b);X.values={message:String,timeout:Number};var Z=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.dismiss=function(){this.el.remove()},t}(b),ee=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){var e=this;requestAnimationFrame(function(){e._restoreOnLoad&&e.restore()})},n.clear=function(e){e&&e.preventDefault(),localStorage.removeItem(this._uniqueIdentifier),this.dispatch(this._element,"element-save:cleared")},n.save=function(e){e&&e.preventDefault();var t=this._element,n=this.attributesValue.split(" "),i={};n.forEach(function(e){return i[e]=a.default(t,e)}),localStorage.setItem(this._uniqueIdentifier,JSON.stringify(i)),this.dispatch(t,"element-save:save:success")},n.restore=function(e){e&&e.preventDefault();var t=this._element;if(localStorage.getItem(this._uniqueIdentifier)){var n=JSON.parse(localStorage.getItem(this._uniqueIdentifier));Object.keys(n).forEach(function(e){l.default(t,e,n[e])}),this.dispatch(t,"element-save:restore:success")}else this.dispatch(t,"element-save:restore:empty")},d(t,[{key:"_id",get:function(){if(this.hasIdValue)return this.idValue;var e=this.el.id;if(""!==e)return e;throw new Error("No ID value to uniquely identify this element. Please either specify data-"+this.identifier+"-id-value or give this element an 'id' attribute. ")}},{key:"_uniqueIdentifier",get:function(){return location.href+" "+this._id}},{key:"_restoreOnLoad",get:function(){return!this.hasRestoreOnLoadValue||this.restoreOnLoadValue}},{key:"_element",get:function(){return this.hasElementTarget?this.elementTarget:this.el}}]),t}(b);ee.targets=["element"],ee.values={id:String,attributes:String,restoreOnLoad:Boolean};var te=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){M(this,{element:this.el,childList:!0}),this.checkEmpty()},n.mutate=function(e){this.checkEmpty()},n.checkEmpty=function(){var e=this.el,t=this._children;0===t.length?(this._removeNotEmptyClasses(),this._addEmptyClasses(),this.dispatch(e,"dom:empty")):(this._addNotEmptyClasses(),this._removeEmptyClasses(),this.dispatch(e,"dom:not-empty",{detail:{count:t.length}}))},n._removeEmptyClasses=function(){var e;this.hasEmptyClass&&(e=this.el.classList).remove.apply(e,this.emptyClasses)},n._addNotEmptyClasses=function(){var e;this.hasNotEmptyClass&&(e=this.el.classList).add.apply(e,this.notEmptyClasses)},n._addEmptyClasses=function(){var e;this.hasEmptyClass&&(e=this.el.classList).add.apply(e,this.emptyClasses)},n._removeNotEmptyClasses=function(){var e;this.hasNotEmptyClass&&(e=this.el.classList).remove.apply(e,this.notEmptyClasses)},d(t,[{key:"emptyClasses",get:function(){return this.emptyClass.split(" ")}},{key:"notEmptyClasses",get:function(){return this.notEmptyClass.split(" ")}},{key:"_children",get:function(){var e=this.el;return Array.from(this.hasScopeSelectorValue?e.querySelectorAll(this.scopeSelectorValue):e.children)}}]),t}(b);te.classes=["empty","notEmpty"],te.values={scopeSelector:String};var ne=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){this.toggle()},n.toggle=function(){this.hasEnablerTarget&&this.enablerTarget.checked?this.enableInputs():this.disableInputs()},n.disableInputs=function(){var e=this.hasClearValue&&this.clearValue;this.enableTargets.forEach(function(t,n){e&&(t.value=""),t.disabled=!0})},n.enableInputs=function(){this.enableTargets.forEach(function(e,t){e.disabled=!1})},t}(b);ne.targets=["enabler","enable"],ne.values={clear:Boolean};var ie=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.connect=function(){var e=this,t=this.el;t.onerror=function(){e.hasPlaceholderValue?t.src=e.placeholderValue:t.style.display="none"}},t}(b);ie.values={placeholder:String};var re=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.submit=function(e){null==e||e.preventDefault(),this.dispatch(this.formTarget,"submit"),this.formTarget.submit()},n.reset=function(e){null==e||e.preventDefault(),this.dispatch(this.formTarget,"reset"),this.formTarget.reset()},t}(b);re.targets=["form"];var se=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this._clear=this._clear.bind(this)},n.connect=function(){var e=this;requestAnimationFrame(function(){if(!q(e.el))throw new Error("Expected controller to be mounted on a form element.");e._restoreOnLoad&&e.restore(),e._clearOnSubmit&&e.el.addEventListener("submit",e._clear)})},n.disconnect=function(){this._clearOnSubmit&&this.el.removeEventListener("submit",this._clear)},n._clear=function(){localStorage.removeItem(this._formIdentifier),this.dispatch(this.el,"form-save:cleared")},n.clear=function(e){null==e||e.preventDefault(),this._clear()},n.save=function(e){e.preventDefault(),localStorage.setItem(this._formIdentifier,JSON.stringify(this._formData[this._formIdentifier])),this.dispatch(this.el,"form-save:save:success")},n.restore=function(e){if(null==e||e.preventDefault(),localStorage.getItem(this._formIdentifier)){for(var t,n=JSON.parse(localStorage.getItem(this._formIdentifier)),i=g(this._formElements);!(t=i()).done;){var r=t.value;r.name in n&&(j(r)&&"checkbox"==r.type?r.checked=n[r.name]:j(r)&&"radio"==r.type?r.value==n[r.name]&&(r.checked=!0):r.value=n[r.name])}this.dispatch(this.el,"form-save:restore:success")}else this.dispatch(this.el,"form-save:restore:empty")},d(t,[{key:"_formID",get:function(){if(this.hasIdValue)return this.idValue;var e=this.el.id;if(""!==e)return e;throw new Error("No ID value to uniquely identify this form. Please either specify data-"+this.identifier+"-id-value or give this form an 'id' attribute. ")}},{key:"_formIdentifier",get:function(){return location.href+" "+this._formID}},{key:"_formElements",get:function(){return this.el.elements}},{key:"_formData",get:function(){for(var e,t,n=((e={})[this._formIdentifier]={},e),i=g(this._formElements);!(t=i()).done;){var r=t.value;r.name.length>0&&(j(r)&&"checkbox"==r.type?n[this._formIdentifier][r.name]=r.checked:j(r)&&"radio"==r.type?r.checked&&(n[this._formIdentifier][r.name]=r.value):n[this._formIdentifier][r.name]=r.value)}return n}},{key:"_restoreOnLoad",get:function(){return!this.hasRestoreOnLoadValue||this.restoreOnLoadValue}},{key:"_clearOnSubmit",get:function(){return!this.hasClearOnSubmitValue||this.clearOnSubmitValue}}]),t}(b);se.values={id:String,restoreOnLoad:Boolean,clearOnSubmit:Boolean};var oe=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){S(this,{threshold:this._threshold,element:this.el})},n.appear=function(e){this.dispatch(this.el,"intersection:appear",{detail:{element:this.el}})},n.disappear=function(e){this.dispatch(this.el,"intersection:disappear",{detail:{element:this.el}})},d(t,[{key:"_threshold",get:function(){return this.hasThresholdValue?this.thresholdValue.split(",").map(function(e){return Number.parseFloat(e.trim())}).filter(function(e){return e>=0&&e<=1}):[0,1]}}]),t}(b);oe.values={threshold:String};var ae,le=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){if("IntersectionObserver"in window){var e=S(this,{element:this.el,threshold:.3});this.observe=e[0],this.unobserve=e[1]}else this.loadContent()},n.appear=function(e){e.target===this.el&&e.isIntersecting&&(this.loadContent(),this.unobserve&&this.unobserve())},t}(E),ce=function(e,t){var n=void 0===t?{}:t,i=n.behavior,r=void 0===i?"smooth":i,s=n.block,o=void 0===s?"start":s,a=n.inline,l=void 0===a?"nearest":a;try{var c=function(){e.scrollIntoView({behavior:r,block:o,inline:l})},u=function(){if("smooth"==r&&!ue)return Promise.resolve(function(){try{return Promise.resolve(import("smoothscroll-polyfill")).then(function(e){ae||(ae=!0,(0,e.polyfill)())})}catch(e){return Promise.reject(e)}}()).then(function(){})}();return Promise.resolve(u&&u.then?u.then(c):c())}catch(e){return Promise.reject(e)}},ue="scrollBehavior"in document.documentElement.style;function he(e){if(!e)return null;var t=getComputedStyle(e).overflowY;return"visible"!==t&&"hidden"!==t&&e.scrollHeight>=e.clientHeight?e:he(e.parentElement)||document.body}var de=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._dialog=null,t}m(t,e);var n=t.prototype;return n.initialize=function(){this.open=this.open.bind(this),this.close=this.close.bind(this)},n.connect=function(){},n.open=function(){var e=this,t=this.el;if(!this._dialog){this._dialog=document.createElement("dialog");var n=document.createElement("img");n.className=this._imageClassName,n.src=this._src,n.srcset=this._srcSet,n.sizes=this._sizes,this._dialog.appendChild(n),t.insertAdjacentElement("afterend",this._dialog),c.default.registerDialog(this._dialog),this._dialog.className=this._modalClassName,this._dialog.showModal(),ce(this._dialog,{behavior:"smooth",block:"end"}).catch(function(){return e._dialog.scrollIntoView(!1)}),this._dialog.addEventListener("click",this.close),this._dialog.addEventListener("cancel",this.close),this._dialog.addEventListener("close",this.close)}},n.close=function(){var e=this;this._dialog&&(this._dialog.close(),this._dialog.remove(),this._dialog=null,ce(this.el,{behavior:"smooth",block:"end"}).catch(function(){return e.el.scrollIntoView(!1)}))},d(t,[{key:"_src",get:function(){return this.hasSrcValue?this.srcValue:this.el.src}},{key:"_srcSet",get:function(){return this.hasSrcSetValue?this.srcSetValue:this.el.srcset}},{key:"_sizes",get:function(){return this.hasSizesValue?this.sizesValue:this.el.sizes}},{key:"_modalClassName",get:function(){return this.hasModalClass?this.modalClass:"image-lightbox-dialog"}},{key:"_imageClassName",get:function(){return this.hasImageClass?this.imageClass:"image-lightbox-image"}}]),t}(b);de.values={src:String,srcSet:String,sizes:String},de.classes=["modal","image"];var fe=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.handleInputs=this.handleInputs.bind(this)},n.connect=function(){var e=this;this.inputTargets.forEach(function(t){return t.addEventListener("change",e.handleInputs)})},n.disconnect=function(){var e=this;this.inputTargets.forEach(function(t){return t.removeEventListener("change",e.handleInputs)})},n.handleInputs=function(e){var t=this.inputTargets.reduce(function(e,t){return t.checked?e+1:e},0),n=e.target;t>this.maxValue?(e.preventDefault(),n.checked=!1,this.dispatch(n,"change"),this.dispatch(n,"limited-selection:too-many"),this.hasErrorTarget&&(this.errorTarget.innerHTML=this.messageValue)):(this.dispatch(n,"limited-selection:selection"),this.hasErrorTarget&&(this.errorTarget.innerHTML=""))},t}(b);fe.targets=["input","error"],fe.values={max:Number,message:String};var me=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){},n.connect=function(){},n.disconnect=function(){},n.play=function(e){try{return null==e||e.preventDefault(),Promise.resolve(this.mediaTarget.play()).then(function(){})}catch(e){return Promise.reject(e)}},n.pause=function(e){null==e||e.preventDefault(),this.mediaTarget.pause()},n.restart=function(e){null==e||e.preventDefault(),this.mediaTarget.currentTime=0},n.seek=function(e){null==e||e.preventDefault(),this.mediaTarget.currentTime+=5},t}(b);me.targets=["media"];var pe=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){this._checkStructure()},n.add=function(e){null==e||e.preventDefault();var t=this.templateTarget.innerHTML.replace(/NEW_RECORD/g,this._generateID());this.targetTarget.insertAdjacentHTML(this._insertMode,t)},n.remove=function(e){e.preventDefault();var t=e.target.closest("."+this._wrapperClass);if(null==t)throw new Error("#remove was clicked from outside of a child record. Could not find an ancestor with class ."+this._wrapperClass);if("true"===t.dataset.newRecord)t.remove();else{t.style.display="none";var n=t.querySelector("input[name*='_destroy']");if(null==n)throw new Error("Could not find a hidden input with name '_destroy'. NestedForm cannot remove an already persisted record without it.");n.value="1"}},n._generateID=function(){return(new Date).getTime().toString()+Math.random().toString().slice(2)},n._checkStructure=function(){if(this.templateTarget.innerHTML.indexOf("NEW_RECORD"))throw new Error("Could not find 'NEW_RECORD' in the provided template. Please make sure you've passed `child_index: 'NEW_RECORD'` to `fields_for`")},d(t,[{key:"_wrapperClass",get:function(){return this.hasWrapperSelectorValue?this.wrapperClassValue:"nested-fields"}},{key:"_insertMode",get:function(){return this.hasInsertModeValue?this.insertModeValue:"beforeend"}}]),t}(b);pe.targets=["target","template"],pe.values={insertMode:String,wrapperClass:String};var ve=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.checkPasswordsMatch=this.checkPasswordsMatch.bind(this)},n.connect=function(){var e=this;this.passwordTargets.forEach(function(t){return t.addEventListener("change",e.checkPasswordsMatch)})},n.disconnect=function(){var e=this;this.passwordTargets.forEach(function(t){return t.removeEventListener("change",e.checkPasswordsMatch)})},n._allPasswordsMatch=function(){var e=new Set(this.passwordTargets.map(function(e){return e.value}));return e.has("")||1==e.size},n.checkPasswordsMatch=function(){var e=this,t=this.el;this._allPasswordsMatch()?(this.dispatch(t,"password-confirm:match"),this.hasErrorClass&&this.passwordTargets.forEach(function(t){return t.classList.remove(e.errorClass)})):(this.dispatch(t,"password-confirm:no-match"),this.hasErrorClass&&this.passwordTargets.forEach(function(t){return t.classList.add(e.errorClass)}))},t}(b);ve.targets=["password"],ve.classes=["error"];var ge=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.peak=function(e){null==e||e.preventDefault(),this.passwordTarget.type="text"},n.hide=function(e){null==e||e.preventDefault(),this.passwordTarget.type="password"},n.toggle=function(e){null==e||e.preventDefault(),"password"===this.passwordTarget.type?this.peak():this.hide()},t}(b);ge.targets=["password"];var be=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.replace=function(e){var t=e.detail[0];if(t instanceof Node){var n=t.querySelector(this._selector);if(null==n)throw new Error('expected new form DOM with [data-controller="'+this.identifier+'"] to be present in returned payload');var i=this.el.parentNode;if(null==i)throw new Error("expected form to have a DOM parent, could not execute replaceChild");i.replaceChild(n,this.el)}else console.log("Unknown",t)},d(t,[{key:"_selector",get:function(){return this.hasSelectorValue?this.selectorValue:'[data-controller~="'+this.identifier+'"]'}}]),t}(b);be.targets=[],be.values={selector:String};var ye=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.messageReceived=this.messageReceived.bind(this)},n.connect=function(){window.addEventListener("message",this.messageReceived)},n.disconnect=function(){window.removeEventListener("message",this.messageReceived)},n.messageReceived=function(e){var t=e.data;t.hasOwnProperty("name")&&"iframe-body"===t.name&&t.hasOwnProperty("height")&&this.resize(t.height)},n.resize=function(e){this.el.style.height=e+"px"},t}(b),_e=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){var e,t,n;window.self!==window.top&&(N(this),t={},null===(n=(e=this).constructor.debounces)||void 0===n||n.forEach(n=>{if("string"==typeof n&&(e[n]=O(e[n],null==t?void 0:t.wait)),"object"==typeof n){const{name:i,wait:r}=n;if(!i)return;e[i]=O(e[i],r||(null==t?void 0:t.wait))}}),this.postUpdate())},n.windowResize=function(e){this.postUpdate()},n.postUpdate=function(){var e={name:"iframe-body",height:this.getHeight()};window.parent.postMessage(e,"*")},n.getHeight=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},t}(b);_e.debounces=["postUpdate"];var Ee=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n._cleanupSelf=function(){this.cleanup(this.el)},n.cleanup=function(e){var t,n,i,r=this;e.dataset.controller=(null==(t=e.dataset.controller)?void 0:t.replaceAll(new RegExp("(s|^)"+this.identifier+"(s|$)","g"),""))||"",""==e.dataset.controller&&delete e.dataset.controller;var s=new RegExp("(s|^)"+this.identifier+"\\..+?(s|$)","g");e.dataset.target=(null==(n=e.dataset.target)?void 0:n.replaceAll(s,""))||"",delete e.dataset[u.default(this.identifier+"-target")],""==e.dataset.target&&delete e.dataset.target,e.dataset.action=(null==(i=e.dataset.target)?void 0:i.replaceAll(s,""))||"",delete e.dataset[u.default(this.identifier+"-action")],""==e.dataset.action&&delete e.dataset.action;var o=this.constructor.values;o&&Object.keys(o).forEach(function(t){return delete e.dataset[u.default(r.identifier+"-"+t+"-value")]});var a=this.constructor.classes;a&&Object.keys(a).forEach(function(t){return delete e.dataset[u.default(r.identifier+"-"+t+"-class")]})},t}(b),we=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.connect=function(){var e=this;requestAnimationFrame(function(){ce(e.el,{behavior:e.hasBehaviorValue?e.behaviorValue:"smooth",block:e.hasBlockValue?e.blockValue:"center",inline:e.hasInlineValue?e.inlineValue:"center"}).catch(function(){return e.el.scrollIntoView()}),e._cleanupSelf()})},t}(Ee);we.values={behavior:String,block:String,inline:String};var ke=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.scroll=function(e){var t;null==e||e.preventDefault(),null!=(t="document"==(this.hasModeValue?this.modeValue:"document")?document.body:he(this.el))&&ce(t,{behavior:"smooth",block:"end"}).catch(function(){return t.scrollIntoView(!1)})},t}(b);ke.values={mode:String};var Ce=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.scroll=function(){var e=document.querySelector(this.selectorValue);e?ce(e,{behavior:this.hasBehaviorValue?this.behaviorValue:"smooth",block:this.hasBlockValue?this.blockValue:"center",inline:this.hasInlineValue?this.inlineValue:"center"}).catch(function(){return e.scrollIntoView()}):console.warn("Could not find target for '"+this.selectorValue+"'")},t}(b);Ce.values={selector:String,behavior:String,block:String,inline:String};var Te=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.scroll=function(e){var t;null==e||e.preventDefault(),null!=(t="document"==(this.hasModeValue?this.modeValue:"document")?document.body:he(this.el))&&ce(t,{behavior:"smooth",block:"start"}).catch(function(){return t.scrollIntoView(!1)})},t}(b);Te.values={mode:String};var Ve=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._timeout=null,t}m(t,e);var n=t.prototype;return n.connect=function(){var e=this;requestAnimationFrame(function(){e._timeout=setTimeout(function(){return e.el.remove()},1e3*e.secondsValue)})},n.disconnect=function(){this._timeout&&clearTimeout(this._timeout)},t}(b);Ve.values={seconds:Number};var Se=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._magicElement=null,t}m(t,e);var n=t.prototype;return n.createMagicElement=function(){if(null===this._magicElement)switch(this._magicElement=document.createElement("div"),this._mode){case"top":this.el.insertAdjacentElement("beforebegin",this._magicElement);break;case"bottom":this.el.insertAdjacentElement("afterend",this._magicElement)}},n.connect=function(){var e=this,t=this.el;this.createMagicElement(),new IntersectionObserver(function(n){n.forEach(function(n){n.target===e._magicElement&&(0===n.intersectionRatio?t.classList.add(e.hasStuckClass?e.stuckClass:"stuck"):1===n.intersectionRatio&&t.classList.remove(e.hasStuckClass?e.stuckClass:"stuck"))})},{threshold:[0,1]}).observe(this._magicElement)},d(t,[{key:"_mode",get:function(){return this.hasModeValue?this.modeValue:"top"}}]),t}(b);Se.classes=["stuck"],Se.values={mode:String};var Le=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._lastIndex=null,t._reverse=!1,t}m(t,e);var n=t.prototype;return n.initialize=function(){this.sort=this.sort.bind(this)},n.connect=function(){var e=this;requestAnimationFrame(function(){e._tableHeaders.forEach(function(t){return t.addEventListener("click",e.sort)}),e.hasStartSortValue&&e._sortByColumn(e.startSortValue)})},n.disconnect=function(){var e=this;this._tableHeaders.forEach(function(t){return t.removeEventListener("click",e.sort)})},n.sort=function(e){e.preventDefault();var t=this._indexOfHeaderCell(e.target);this._sortByColumn(t)},n._indexOfHeaderCell=function(e){return this._tableHeaders.indexOf(e)},n._sortByColumn=function(e){var t=this;this._reverse=e===this._lastIndex&&!this._reverse;var n=document.createDocumentFragment();this._tableRows.sort(function(n,i){var r,s,o=Array.from(n.cells),a=Array.from(i.cells),l=(null==(r=o[e])?void 0:r.innerText)||"",c=(null==(s=a[e])?void 0:s.innerText)||"",u=l.localeCompare(c,"en",{sensitivity:"base",numeric:!0,caseFirst:"upper"});return n.dataset.sortTop||i.dataset.sortBottom?n.dataset.sortTop&&i.dataset.sortTop?u:-1:n.dataset.sortBottom||i.dataset.sortTop?n.dataset.sortBottom&&i.dataset.sortBottom?u:1:t._reverse?u>0?-1:1:u}).forEach(function(e){return n.appendChild(e)}),this._tableBody.innerHTML="",this._tableBody.appendChild(n),this._lastIndex=e},d(t,[{key:"_tableHead",get:function(){var e=this.el.tHead;if(null==e)throw new Error("Expected table to have a <thead> element.");return e}},{key:"_tableHeaders",get:function(){var e=this._tableHead.rows;if(0==e.length)throw new Error("Expected table to have a <thead> element with at least one row.");return Array.from(e[0].cells)}},{key:"_tableBody",get:function(){return this.el.tBodies[0]}},{key:"_tableRows",get:function(){return Array.from(this._tableBody.rows)}}]),t}(b);Le.values={startSort:Number};var Ae=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.truncate=this.truncate.bind(this),this.expand=this.expand.bind(this)},n.connect=function(){var e=this;M(this,{childList:!0,element:this._tableBody}),requestAnimationFrame(function(){e.truncate(),e.showMoreTarget.addEventListener("click",e.expand)})},n.truncate=function(e){var t=this;null==e||e.preventDefault(),this._truncated=!0,this._tableRows.length>=this._limit?(this._tableRows.slice(this._limit).forEach(function(e){e!==t.showMoreTarget&&t._hideElement(e)}),this._showElement(this.showMoreTarget)):this._hideElement(this.showMoreTarget)},n.expand=function(e){var t=this;this._truncated=!1,null==e||e.preventDefault(),this._tableRows.slice(this._limit).forEach(function(e){e!==t.showMoreTarget&&t._showElement(e)}),this._hideElement(this.showMoreTarget)},n.mutate=function(e){this._truncated&&this._reTruncate()},n._showElement=function(e){e.style.display=""},n._hideElement=function(e){e.style.display="none"},n._reTruncate=function(){var e=this;this._tableRows.slice(0,this._limit).forEach(function(t){t!==e.showMoreTarget&&e._showElement(t)}),this._tableRows.slice(this._limit).forEach(function(t){t!==e.showMoreTarget&&e._hideElement(t)}),this._showElement(this.showMoreTarget)},d(t,[{key:"_truncated",get:function(){return!!this.hasTruncatedValue&&this.truncatedValue},set:function(e){this.truncatedValue=e}},{key:"_tableBody",get:function(){return this.el.tBodies[0]}},{key:"_tableRows",get:function(){return Array.from(this._tableBody.rows)}},{key:"_limit",get:function(){return this.hasLimitValue?this.limitValue:20}}]),t}(b);Ae.targets=["showMore"],Ae.values={limit:Number,truncated:Boolean};var De=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){var e=this;if(!this.hasInsertValue)throw new Error("`insert` value was not specified");requestAnimationFrame(function(){e.hasImmediateValue&&e.immediateValue&&e.execute()})},n.execute=function(e){null==e||e.preventDefault();var t=this.el,n=document.querySelector(this.targetValue);if(null!=n){var i=t.cloneNode(!0);switch(this.cleanup(i),this.insertValue){case"beforebegin":case"beforeend":case"afterend":case"afterbegin":n.insertAdjacentHTML(this.insertValue,i.outerHTML);break;case"replaceOuter":n.outerHTML=i.outerHTML;break;case"replaceInner":n.innerHTML=i.outerHTML;break;case"prepend":n.insertAdjacentHTML("afterbegin",i.outerHTML);break;case"append":n.insertAdjacentHTML("beforeend",i.outerHTML);break;default:throw new Error("`insert` value was not specified")}t.remove()}else this.dispatch(t,"teleport:error")},t}(Ee);De.values={target:String,insert:String,immediate:Boolean};var Ie=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.connect=function(){var e=this;if(!this.hasClassValue)throw new Error("data-toggle-class-class-value must not be empty");(this.hasMouseEnterValue||this.hasMouseLeaveValue)&&((e,t={})=>{new I(this,t)})(),this.hasClickAwayValue&&this.clickAwayValue&&((e,t={})=>{const{onlyVisible:n,dispatchEvent:i,events:r,eventPrefix:s}=Object.assign({},L,t),o=r=>{const o=(null==t?void 0:t.element)||e.element;if(!(o.contains(r.target)||!function(e){const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth;return t.top<=n&&t.top+t.height>=0&&t.left<=i&&t.left+t.width>=0}(o)&&n)&&(e.clickOutside&&e.clickOutside(r),i)){const t=C("click:outside",e,s),n=T(t,r,{controller:e});o.dispatchEvent(n)}},a=e.disconnect.bind(e);Object.assign(e,{disconnect(){null==r||r.forEach(e=>{window.removeEventListener(e,o,!1)}),a()}}),null==r||r.forEach(e=>{window.addEventListener(e,o,!1)})})(this),requestAnimationFrame(function(){e.hasInitialValue&&e.toggleTargets.forEach("on"===e.initialValue?function(t){return e._elementOn(t)}:function(t){return e._elementOff(t)})})},n.clickOutside=function(){var e=this;this.toggleTargets.forEach(function(t){e._elementWasToggled(t)&&(e._elementToggleStatus(t),e._elementToggle(t))})},n.mouseEnter=function(){if(this.hasMouseEnterValue)switch(this.mouseEnterValue){case"on":this.on();break;case"off":this.off();break;case"toggle":this.toggle()}return{}},n.mouseLeave=function(){if(this.hasMouseLeaveValue)switch(this.mouseLeaveValue){case"on":this.on();break;case"off":this.off();break;case"toggle":this.toggle()}return{}},n.on=function(e){var t=this;this.toggleTargets.forEach(function(e){t._elementToggleStatus(e),t._elementOn(e)})},n.off=function(e){var t=this;this.toggleTargets.forEach(function(e){t._elementToggleStatus(e),t._elementOff(e)})},n.toggle=function(e){var t=this;this.toggleTargets.forEach(function(e){t._elementToggleStatus(e),t._elementToggle(e)})},n._elementWasToggled=function(e){return"true"==e.dataset.toggled},n._elementToggleStatus=function(e){this._elementWasToggled(e)?delete e.dataset.toggled:e.dataset.toggled="true"},n._elementToggle=function(e){this.classValue.split(" ").forEach(function(t){return e.classList.toggle(t)})},n._elementOn=function(e){this.classValue.split(" ").forEach(function(t){return e.classList.toggle(t,!0)})},n._elementOff=function(e){this.classValue.split(" ").forEach(function(t){return e.classList.toggle(t,!1)})},t}(b);function xe(e){return"TURBO-FRAME"==e.nodeName}Ie.targets=["toggle"],Ie.values={class:String,mouseEnter:String,mouseLeave:String,clickAway:Boolean,initial:String};var Me=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.toggle=function(e){null==e||e.preventDefault();var t=this._getFrame().src;null==t||t!==this._getSrc()?this._setSrc():this._clear()},n.setSrc=function(e){null==e||e.preventDefault(),this._setSrc()},n.clear=function(e){null==e||e.preventDefault(),this._clear()},n._setSrc=function(){var e=this._getFrame();this.hasLoadingMessageValue&&(e.innerHTML=this.loadingMessageValue),e.src=this._getSrc()},n._clear=function(){var e=this._getFrame();e.src="",e.innerHTML=""},n._getFrame=function(){var e=document.getElementById(""+this.frameIdValue);if(null==e)throw new Error("Could not find frame with ID '"+this.frameIdValue+"'");if(xe(e))return e;throw new Error("Element targeted by ID '"+this.frameIdValue+"'")},n._getSrc=function(){var e=this.el;if(this.hasSrcValue)return this.srcValue;if(B(e))return e.href;throw new Error("No link given to drive frame to")},t}(b);Me.values={frameId:String,src:String,loadingMessage:String};var Ne=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._timeoutHandle=null,t}m(t,e);var n=t.prototype;return n.initialize=function(){this.refresh=this.refresh.bind(this)},n.connect=function(){var e=this,t=this.el;if(!xe(t))throw new Error("Expected controller to be mounted on a <turbo-frame> element.");if(t.src)throw new Error("The provided <turbo-frame> element has no `src` attribute.");this._poll&&requestAnimationFrame(function(){return e._timeoutHandle=setTimeout(function(){return e.refresh()},e.intervalValue)})},n.disconnect=function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)},n.refresh=function(e){null==e||e.preventDefault();var t=this.el;t.src=t.src},d(t,[{key:"_poll",get:function(){return!!this.hasPollValue&&this.pollValue}}]),t}(b);Ne.values={interval:Number,poll:Boolean};var Oe=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.initialize=function(){this.updateWordCount=this.updateWordCount.bind(this)},n.connect=function(){this.updateWordCount(),this.inputTarget.addEventListener("input",this.updateWordCount)},n.disconnect=function(){this.inputTarget.removeEventListener("input",this.updateWordCount)},n.updateWordCount=function(){var e=0,t=this.inputTarget.value.match(/\S+/g);this.outputTarget.innerText=(e=t&&t.length||0).toString(),this.hasErrorClass&&(this._isValidCount(e)?this.outputTarget.classList.remove(this.errorClass):this.outputTarget.classList.add(this.errorClass))},n._isValidCount=function(e){var t=0,n=99999;return this.hasMinValue&&(t=this.minValue),this.hasMaxValue&&(n=this.maxValue),e>=t&&e<=n},t}(b);Oe.targets=["input","output"],Oe.values={min:Number,max:Number},Oe.classes=["error"],e.AnchorSpyController=y,e.AppearanceController=_,e.AsyncBlockController=E,e.AutoSubmitFormController=w,e.AutosizeController=H,e.CharCountController=R,e.CheckboxSelectAllController=z,e.ClipboardController=F,e.ConfirmController=U,e.ConfirmNavigationController=J,e.DebugController=Y,e.DetectDirtyController=G,e.DetectDirtyFormController=K,e.DisableInputsController=Q,e.DisableWithController=X,e.DismissableController=Z,e.ElementSaveController=ee,e.EmptyDomController=te,e.EnableInputsController=ne,e.FallbackImageController=ie,e.FormRcController=re,e.FormSaveController=se,e.IntersectionController=oe,e.LazyBlockController=le,e.LightboxImageController=de,e.LimitedSelectionCheckboxesController=fe,e.MediaPlayerController=me,e.NestedFormController=pe,e.PasswordConfirmController=ve,e.PasswordPeekController=ge,e.RemoteFormController=be,e.ResponsiveIframeBodyController=_e,e.ResponsiveIframeWrapperController=ye,e.ScrollIntoFocusController=we,e.ScrollToBottomController=ke,e.ScrollToController=Ce,e.ScrollToTopController=Te,e.SelfDestructController=Ve,e.StickyController=Se,e.TableSortController=Le,e.TableTruncateController=Ae,e.TeleportController=De,e.ToggleClassController=Ie,e.TurboFrameRCController=Me,e.TurboFrameRefreshController=Ne,e.WordCountController=Oe});
//# sourceMappingURL=stimulus-library.umd.js.map
