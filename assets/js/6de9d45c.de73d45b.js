"use strict";(self.webpackChunkdocs_2=self.webpackChunkdocs_2||[]).push([[5523],{5086:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"mixins/useLocalStorage","title":"useLocalStorage","description":"Purpose","source":"@site/docs/mixins/use_localstorage.mdx","sourceDirName":"mixins","slug":"/mixins/useLocalStorage","permalink":"/stimulus-library/docs/mixins/useLocalStorage","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"useLocalStorage","title":"useLocalStorage"},"sidebar":"DocsSidebar","previous":{"title":"useInterval","permalink":"/stimulus-library/docs/mixins/useInterval"},"next":{"title":"useMutationObserver","permalink":"/stimulus-library/docs/mixins/useMutationObserver"}}');var l=s(4848),n=s(8453);const o={id:"useLocalStorage",title:"useLocalStorage"},i=void 0,a={},d=[{value:"Purpose",id:"purpose",level:2},{value:"useLocalStorage",id:"uselocalstorage",level:3},{value:"Side Effects",id:"side-effects",level:2},{value:"How to Use",id:"how-to-use",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h2,{id:"purpose",children:"Purpose"}),"\n",(0,l.jsxs)(t.p,{children:["A mixin to enable easy use of the ",(0,l.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage",children:"localStorage"})," API."]}),"\n",(0,l.jsx)(t.h3,{id:"uselocalstorage",children:"useLocalStorage"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{children:"Parameters"}),(0,l.jsx)(t.th,{}),(0,l.jsx)(t.th,{children:"Type"}),(0,l.jsx)(t.th,{children:"Purpose"}),(0,l.jsx)(t.th,{children:"Default"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"controller"})}),(0,l.jsx)(t.td,{}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"Controller"})}),(0,l.jsxs)(t.td,{children:["The instance of the controller to install the behaviour on. This allows the mixin to automatically register cleanup on the controller's ",(0,l.jsx)(t.code,{children:"disconnect"}),"."]}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"this"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"identifier"})}),(0,l.jsx)(t.td,{}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"String"})}),(0,l.jsx)(t.td,{}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"-"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"defaultValue"})}),(0,l.jsx)(t.td,{}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"Set|Map|Boolean|String|Object|Number"})}),(0,l.jsx)(t.td,{children:"The default value to use if there is none stored. The value given here will determine how the mixin serializes future data read/writes"}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"-"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsxs)(t.td,{children:[(0,l.jsx)(t.code,{children:"options"})," (Optional)"]}),(0,l.jsx)(t.td,{}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"Object"})}),(0,l.jsx)(t.td,{children:"An object of options to configure the mixin's behaviour"}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"-"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{}),(0,l.jsx)(t.td,{children:"writeDefaults"}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"Boolean"})}),(0,l.jsx)(t.td,{children:"If the LocalStorage value is empty, whether to write the given default to storage on load"}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"true"})})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{}),(0,l.jsx)(t.td,{children:"onChange"}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"Function(newValue, oldValue) => void"})}),(0,l.jsx)(t.td,{children:"A callback that will be called every time the localstorage value changes"}),(0,l.jsx)(t.td,{children:(0,l.jsx)(t.code,{children:"true"})})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"side-effects",children:"Side Effects"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Adds an event listener on the ",(0,l.jsx)(t.code,{children:"Window"})," object for the ",(0,l.jsx)(t.code,{children:"storage"})," event. This is used to detect changes to the LocalStorage value from other tabs/windows."]}),"\n",(0,l.jsx)(t.li,{children:"Stores a JSON value in LocalStorage."}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"how-to-use",children:"How to Use"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-js",children:"\nimport {Controller} from '@hotwired/stimulus';\nimport {useLocalStorage} from 'stimulus-library';\n\nexport default class extends Controller {\n\n  connect() {\n    this.store = useLocalStorage(this, 'my-value', 42, { onChange: this.valueChanged })\n\n    // 'Reactive' means that the value will be updated automatically when the value in LocalStorage changes. The value you read here will always be in sync with the value in LocalStorage, even if it was updated elsewhere.\n    this.store.value // Reactive property that reflects the value in LocalStorage\n    this.store.isEmpty // Reactive value that is true if the store is empty\n    this.store.read() // returns the value stored in LocalStorage\n    this.store.write(value) // the raw value to be stored in LocalStorage. Should be the same type as the default value.\n    this.store.clear() // clears the stored value\n  }\n\n  valueChanged(newValue, oldValue) {\n    // Called every time the value changes\n  }\n\n}\n\n"})})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>i});var r=s(6540);const l={},n=r.createContext(l);function o(e){const t=r.useContext(n);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);