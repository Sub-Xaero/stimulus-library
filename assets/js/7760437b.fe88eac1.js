"use strict";(self.webpackChunkdocs_2=self.webpackChunkdocs_2||[]).push([[6503],{7250:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"mixins/useTemporaryContent","title":"useTemporaryContent","description":"Purpose","source":"@site/docs/mixins/use_temporary_content.mdx","sourceDirName":"mixins","slug":"/mixins/useTemporaryContent","permalink":"/stimulus-library/docs/mixins/useTemporaryContent","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"useTemporaryContent","title":"useTemporaryContent"},"sidebar":"DocsSidebar","previous":{"title":"useResizeObserver","permalink":"/stimulus-library/docs/mixins/useResizeObserver"},"next":{"title":"useTextSelection","permalink":"/stimulus-library/docs/mixins/useTextSelection"}}');var o=t(4848),s=t(8453),i=t(9430);const l={id:"useTemporaryContent",title:"useTemporaryContent"},d=void 0,c={},a=[{value:"Purpose",id:"purpose",level:2},{value:"Side Effects",id:"side-effects",level:2},...i.RM,{value:"Usage",id:"usage",level:2},{value:"useTemporaryContent",id:"usetemporarycontent",level:3},{value:"How to Use",id:"how-to-use",level:2},{value:"Automatic Teardown",id:"automatic-teardown",level:3},{value:"Manual Teardown",id:"manual-teardown",level:3}];function h(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,o.jsxs)(n.p,{children:["Set the ",(0,o.jsx)(n.code,{children:"innerHTML"})," of elements (or ",(0,o.jsx)(n.code,{children:"value"})," of ",(0,o.jsx)(n.code,{children:'<input type="submit">'})," & etc elements) either for a set period of time,\nor until the returned cleanup function is called."]}),"\n",(0,o.jsx)(n.p,{children:"Useful for showing loading indicators, placeholder content, or other temporary content."}),"\n",(0,o.jsx)(n.h2,{id:"side-effects",children:"Side Effects"}),"\n",(0,o.jsx)(i.Ay,{}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.h3,{id:"usetemporarycontent",children:"useTemporaryContent"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Parameters"}),(0,o.jsx)(n.th,{children:"Type"}),(0,o.jsx)(n.th,{children:"Purpose"}),(0,o.jsx)(n.th,{children:"Default"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"controller"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Controller"})}),(0,o.jsxs)(n.td,{children:["The instance of the controller to install the behaviour on. This allows the mixin to automatically register cleanup on the controller's ",(0,o.jsx)(n.code,{children:"disconnect"}),"."]}),(0,o.jsx)(n.td,{})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"target"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"HTMLElement"})}),(0,o.jsx)(n.td,{children:"The element to change the content of"}),(0,o.jsx)(n.td,{})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"content"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"String"})}),(0,o.jsx)(n.td,{children:"The content to temporarily set the element to contain"}),(0,o.jsx)(n.td,{})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"timeout"})," (Optional)"]}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Integer"})}),(0,o.jsx)(n.td,{children:"The time in ms before the original content is restored to the element. If left blank, the content will only be restored when you call the teardown function."}),(0,o.jsx)(n.td,{})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"callback"})," (Optional)"]}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Function"})}),(0,o.jsx)(n.td,{children:"A function, which if provided, will be called when the the original content is restored. Useful if you want to hook your own code into the cleanup process"}),(0,o.jsx)(n.td,{})]})]})]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Return Values"}),(0,o.jsx)(n.th,{children:"Type"}),(0,o.jsx)(n.th,{children:"Purpose"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"teardown"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Function"})}),(0,o.jsx)(n.td,{children:"Call this function when you want the original content to be restored to your element"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"update"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Function"})}),(0,o.jsx)(n.td,{children:"Call this function with a different string to change the temporary content in your element, the original content from when the mixin was first called will still be remembered and restored on teardown"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"how-to-use",children:"How to Use"}),"\n",(0,o.jsx)(n.h3,{id:"automatic-teardown",children:"Automatic Teardown"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"\nimport {Controller} from '@hotwired/stimulus';\nimport {useTemporaryContent} from 'stimulus-library';\n\nexport default class ClipboardController extends Controller {\n\n  static targets = ['source', 'prompt'];\n\n  copy() {\n    this.sourceTarget.select();\n    document.execCommand('copy');\n\n    useTemporaryContent(this, this.promptTarget, 'Copied!', 3000);\n  }\n\n  disconnect() {\n    // All temporary content will be automatically restored to the originals when the controller is disconnected\n    // No need to do anything here\n  }\n\n\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"manual-teardown",children:"Manual Teardown"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"\nimport {Controller} from '@hotwired/stimulus';\nimport {useTemporaryContent} from 'stimulus-library';\n\nexport default class extends Controller {\n\n  async loadContent() {\n    if (this.previousTeardown) {\n      this.previousTeardown();\n    }\n    let {teardown, update} = useTemporaryContent(this, this.element, `Loading...<i class=\"fa fa-spinner fa-spin\"></i>`);\n    this.previousTeardown = teardown;\n\n    let results = await fetch(`example.com/api/data`);\n\n    if (results.ok) {\n      let data = await results.text();\n      teardown();\n      this.element.innerHTML = data.html;\n    } else {\n      update('Error loading content. Please try again');\n    }\n  }\n\n  disconnect() {\n    // All temporary content will be automatically restored to the originals when the controller is disconnected\n    // No need to do anything here\n  }\n\n\n}\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var r=t(6540);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}},9430:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var r=t(4848),o=t(8453);const s=[];function i(e){const n={p:"p",...(0,o.R)(),...e.components};return(0,r.jsx)(n.p,{children:"None"})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}}}]);