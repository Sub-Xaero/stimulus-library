"use strict";(self.webpackChunkdocs_2=self.webpackChunkdocs_2||[]).push([[8996],{5847:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var o=t(5893),s=t(1151);const i={id:"useGeolocation",title:"useGeolocation"},r=void 0,c={id:"mixins/useGeolocation",title:"useGeolocation",description:"Purpose",source:"@site/docs/mixins/use_geolocation.mdx",sourceDirName:"mixins",slug:"/mixins/useGeolocation",permalink:"/stimulus-library/docs/mixins/useGeolocation",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"useGeolocation",title:"useGeolocation"},sidebar:"DocsSidebar",previous:{title:"useFullscreen",permalink:"/stimulus-library/docs/mixins/useFullscreen"},next:{title:"useInjectedHTML",permalink:"/stimulus-library/docs/mixins/useInjectedHTML"}},d={},l=[{value:"Purpose",id:"purpose",level:2},{value:"Side Effects",id:"side-effects",level:2},{value:"Usage",id:"usage",level:2},{value:"useGeolocation",id:"usegeolocation",level:3},{value:"How to Use",id:"how-to-use",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,o.jsx)(n.p,{children:"Enable a controller to subscribe to a user's location, and update the state of the controller when the user's location changes."}),"\n",(0,o.jsx)(n.h2,{id:"side-effects",children:"Side Effects"}),"\n",(0,o.jsxs)(n.p,{children:["The controller will setup an an event listener using ",(0,o.jsx)(n.code,{children:"navigator.watchPosition"})]}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.h3,{id:"usegeolocation",children:"useGeolocation"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Parameters"}),(0,o.jsx)(n.th,{}),(0,o.jsx)(n.th,{children:"Type"}),(0,o.jsx)(n.th,{children:"Purpose"}),(0,o.jsx)(n.th,{children:"Default"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"controller"})}),(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Controller"})}),(0,o.jsxs)(n.td,{children:["The instance of the controller to install the behaviour on. This allows the mixin to automatically register cleanup on the controller's ",(0,o.jsx)(n.code,{children:"disconnect"}),"."]}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"this"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"options"})}),(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Object"})}),(0,o.jsxs)(n.td,{children:["Options to modify how the location data is polled. Any of the options allowed by the ",(0,o.jsx)(n.code,{children:"options"})," parameter accepted by ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition",children:(0,o.jsx)(n.code,{children:"Geolocation.getCurrentPosition()"})})]}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"-"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"update"})," (Optional)"]}),(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Function(position)"})}),(0,o.jsx)(n.td,{children:"A callback that is fired when the user's position updates"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"-"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"position"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Position"})}),(0,o.jsxs)(n.td,{children:["The position object returned by the ",(0,o.jsx)(n.code,{children:"Geolocation.getCurrentPosition()"})," call"]}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"-"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"error"})," (Optional)"]}),(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Function(positionError)"})}),(0,o.jsx)(n.td,{children:"A callback that is fired when there is an error, either because the user denied permission or because of a bad GPS signal"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"-"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"positionError"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/GeolocationPositionError",children:(0,o.jsx)(n.code,{children:"GeolocationPositionError"})})}),(0,o.jsx)(n.td,{children:"The error object raised by the Geolocation service"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"-"})})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"how-to-use",children:"How to Use"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'\nimport {Controller} from \'@hotwired/stimulus\';\nimport {useGeolocation} from \'stimulus-library\';\n\nexport default class extends Controller {\n\n\n  connect() {\n    this.location = useGeolocation(this, {enableHighAccuracy: true}, this.update, this.error);\n  }\n\n  update(position) {\n    this.element.innerHTML = `Located at: ${position.latitude} ${position.longitude}`;\n  }\n\n  error(error) {\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n        this.element.innerHTML = "User denied the request for Geolocation.";\n        break;\n      case error.POSITION_UNAVAILABLE:\n        this.element.innerHTML = "Location information is unavailable.";\n        break;\n      case error.TIMEOUT:\n        this.element.innerHTML = "The request to get user location timed out.";\n        break;\n      default:\n        this.element.innerHTML = "An unknown error occurred.";\n        break;\n    }\n  }\n\n}\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>r});var o=t(7294);const s={},i=o.createContext(s);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);